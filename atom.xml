<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Monkey`s Note</title>
  <subtitle>这里有你们想要的，大家可以敞开心扉交流</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-11-24T03:26:41.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>陈晔，行业ID：Monkey。测试行业年龄最小的布道者。QCon，GMTC等全球技术大会测试专题讲师。《大话移动App测试1.0》《大话移动App测试2.0》《互联网产品故事汇》作者。大家有企业内训，公开课，测试培训，财务自由等需求的可以随时呼唤我～</name>
    <email>snowangelsimon@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>做 iOS 安全测试之前你应该知道的工具 (一)</title>
    <link href="http://yoursite.com/2016/11/24/iOS-anquan-1/"/>
    <id>http://yoursite.com/2016/11/24/iOS-anquan-1/</id>
    <published>2016-11-24T02:37:26.000Z</published>
    <updated>2016-11-24T03:26:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>顺便提一句，iOS的国内安全书我也是遍历了一遍，简直是shit，我只能遍历国外的去了，国内的全部放弃。</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前言还是让我吐槽爽一把吧。我已经碰见很多人上来就问我，用什么工具啊，有没有扫一下就出来的啊，我真的无力吐槽了。我只想说，那你们就不要学习了，也不要上学，更不要上班，就到处讨讨饭不是蛮好的么？多省力啊。专项已经不是那种用工具看一下，扫一下就能够出现结果的了，安全就更不要说了。<strong>就一点，要结合产品的业务特性以及技术实现细节、架构等等才能够分析出来的，不要指望工具，否则你就不要做测试了，做不长久的</strong></p>
<h2 id="idb"><a href="#idb" class="headerlink" title="idb"></a>idb</h2><p>第一个来介绍的就是idb，idb可以说是我用过到现在最最友好的了，因为有GUI界面。不过安全貌似不是那么的方便，大家自己去Google吧。我从来不认为小白就需要手把手。谁都是小白，就看谁会Google，就这句话。</p>
<p>首先我们需要在终端中输入idb，只要安装顺利的话，大家会看到如下界面：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/0f53da5a2685d82b0e170f51f75e74f9.png" alt=""></p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/4b2fd9bf5e84615ca9339b4ed48ae7ed.png" alt=""></p>
<p>是不是觉得就很亲民，我们通过usb或者ssh连接上之后就可以开始使用idb的功能了。（ssh默认密码是alpine）我这里由于之前测试的时候环境没有了，所以我只能用之前的老图了，大家见谅。首先来看下这个。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/4cbe5aecc6ec0a463b9cc53469d92159.jpg" alt=""><br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/e85a196caee0ef9345da14980f1439fc.jpg" alt=""></p>
<p>这里拿点评作为案例，大家可以看到app在device中的基础信息都是已经显示了出来。当然这才是开始。<br>如下图，我们会看到一个url header的list。这个意思我解释一下，其实就是说现在应用中很多都是通过scheme唤起容器或者Activity的，又或者直接通过url打开某些web。那么这里就是说在这个应用中会调用到的url的header，比如dianping://xxxx这样一类就是其中的调用。通过idb可以直接去mock这些url。如下图：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/902f82dedebca97158dad9181741fe15.jpg" alt=""></p>
<p>再来看这个，类似于sandbox，从图中我们也可以看出来ipa沙箱中的目录结构以及每个文件中的数据结构，当然双击这些数据结构中的数据还是能够看到detail的，大部分是不会加密的。包括字段名字，长度等。这些信息也是能够给予我们很大的帮助<br>Android可以反编译，iOS也是一样的。idb可以说集成了iOS反编译的一些工具让我们直接可以对ipa进行反编译，不过这里都是.h，并没有.m，我估计应该是调用工具的关系，理论上都是可以反编译的。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/fdde270dcd537c6aeda1c0b93f4bae07.jpg" alt=""></p>
<p>idb还能够截图，抓包等，简直就是多功能一体机啊。我这里就不多说了，大家自己去体会吧。</p>
<h2 id="otool"><a href="#otool" class="headerlink" title="otool"></a>otool</h2><p>好吧，我承认我low了，我以为这是一个要安装的工具，没有想到是mac自带的。</p>
<p>官方描述</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">The   otool  command  displays  specified  parts  of  object  files  or</div><div class="line">      libraries.  If the -m option is not used the file arguments may  be  of</div><div class="line">      the  form  libx.a(foo.o), to request information about only that object</div><div class="line">      file and not the entire library.   (Typically  <span class="keyword">this</span>  argument  must  be</div><div class="line">      quoted,  ``libx.a(foo.o)<span class="string">''</span>,  to  get  it past the shell.)  Otool under-</div><div class="line">      stands both Mach-O (Mach object)  files  and  universal  file  formats.</div><div class="line">      <span class="function">Otool can display the specified information in either its <span class="title">raw</span> <span class="params">(numeric)</span></span></div><div class="line">      <span class="title">form</span> <span class="params">(without the -v flag)</span>, or in a symbolic form using macro names  of</div><div class="line">      constants, etc. <span class="params">(with the -v or -V flag)</span>.</div></pre></td></tr></table></figure>
<p>输入otool我们可以看到很多的参数，如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">Usage: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool [-arch arch_type] [-fahlLDtdorSTMRIHGvVcXmqQjCP] [-mcpu=arg] [--version] &lt;object file&gt; ...</div><div class="line">    -f print the fat headers</div><div class="line">    -a print the archive header</div><div class="line">    -h print the mach header</div><div class="line">    -l print the load commands</div><div class="line">    -L print shared libraries used</div><div class="line">    -D print shared library id name</div><div class="line">    -t print the text section (disassemble with -v)</div><div class="line">    -p &lt;routine name&gt;  start dissassemble from routine name</div><div class="line">    -s &lt;segname&gt; &lt;sectname&gt; print contents of section</div><div class="line">    -d print the data section</div><div class="line">    -o print the Objective-C segment</div><div class="line">    -r print the relocation entries</div><div class="line">    -S print the table of contents of a library</div><div class="line">    -T print the table of contents of a dynamic shared library</div><div class="line">    -M print the module table of a dynamic shared library</div><div class="line">    -R print the reference table of a dynamic shared library</div><div class="line">    -I print the indirect symbol table</div><div class="line">    -H print the two-level hints table</div><div class="line">    -G print the data in code table</div><div class="line">    -v print verbosely (symbolically) when possible</div><div class="line">    -V print disassembled operands symbolically</div><div class="line">    -c print argument strings of a core file</div><div class="line">    -X print no leading addresses or headers</div><div class="line">    -m don't use archive(member) syntax</div><div class="line">    -B force Thumb disassembly (ARM objects only)</div><div class="line">    -q use llvm's disassembler (the default)</div><div class="line">    -Q use otool(1)'s disassembler</div><div class="line">    -mcpu=arg use `arg' as the cpu for disassembly</div><div class="line">    -j print opcode bytes</div><div class="line">    -P print the info plist section as strings</div><div class="line">    -C print linker optimization hints</div><div class="line">    --version print the version of /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/otool</div></pre></td></tr></table></figure>
<p>这里不难看出，原来是xcode自带的commond tool。首先我们来看下怎么用，开始其实我并不知道这个命令后面到底跟的是什么文件类型。然后otool一直提示需要提供object file，最后我才明白这个object file是个什么东西，这里以JD的ipa为例。</p>
<p>如果是debug签名的.app那么我们右键之后可以看到包的展开，但线上下来的.app默认是没有这个选项的。我们需要先解压缩之后看到如下的界面，这个.app是可以有包展开的。</p>
<p>展开之后我们可以看到很多文件，需要找到如下高亮的文件，这个文件就是otool可以识别的object file，这点大家要注意。<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/f1b1f17efd18638562259fccbcc1dc9f.png" alt=""></p>
<p>找到了这个可以执行的文件之后，我们就开始落地尝试了。首先我们输入</p>
<p><code>otool -L ~/Payload/JD4iPhone.app/JD4iPhone</code></p>
<p>这条命令可以让我们知道这个ipa中引用了哪些库并且是什么版本的，结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 104.2.0)</div><div class="line">/System/Library/Frameworks/LocalAuthentication.framework/LocalAuthentication (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/CoreData.framework/CoreData (compatibility version 1.0.0, current version 519.15.0)</div><div class="line">/System/Library/Frameworks/AdSupport.framework/AdSupport (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/Foundation.framework/Foundation (compatibility version 300.0.0, current version 1144.17.0)</div><div class="line">/System/Library/Frameworks/CoreAudio.framework/CoreAudio (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/usr/lib/libicucore.A.dylib (compatibility version 1.0.0, current version 53.1.0)</div><div class="line">/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony (compatibility version 1.0.0, current version 2651.0.0)</div><div class="line">/System/Library/Frameworks/Accelerate.framework/Accelerate (compatibility version 1.0.0, current version 4.0.0)</div><div class="line">/System/Library/Frameworks/CoreImage.framework/CoreImage (compatibility version 1.0.0, current version 4.0.0)</div><div class="line">/System/Library/Frameworks/CoreMotion.framework/CoreMotion (compatibility version 1.0.0, current version 1756.0.20)</div><div class="line">/System/Library/Frameworks/AssetsLibrary.framework/AssetsLibrary (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/AddressBookUI.framework/AddressBookUI (compatibility version 1.0.0, current version 33.0.0)</div><div class="line">/System/Library/Frameworks/AddressBook.framework/AddressBook (compatibility version 1.0.0, current version 30.0.0)</div><div class="line">/System/Library/Frameworks/CoreLocation.framework/CoreLocation (compatibility version 1.0.0, current version 1756.0.20)</div><div class="line">/System/Library/Frameworks/MessageUI.framework/MessageUI (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/usr/lib/libiconv.2.dylib (compatibility version 7.0.0, current version 7.0.0)</div><div class="line">/System/Library/Frameworks/CoreText.framework/CoreText (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/ImageIO.framework/ImageIO (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/UIKit.framework/UIKit (compatibility version 1.0.0, current version 3347.44.0)</div><div class="line">/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics (compatibility version 64.0.0, current version 600.0.0)</div><div class="line">/System/Library/Frameworks/QuartzCore.framework/QuartzCore (compatibility version 1.2.0, current version 1.11.0)</div><div class="line">/usr/lib/libsqlite3.dylib (compatibility version 9.0.0, current version 169.2.0)</div><div class="line">/System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration (compatibility version 1.0.0, current version 700.20.6)</div><div class="line">/System/Library/Frameworks/CFNetwork.framework/CFNetwork (compatibility version 1.0.0, current version 711.3.18)</div><div class="line">/usr/lib/libz.1.dylib (compatibility version 1.0.0, current version 1.2.5)</div><div class="line">/usr/lib/libxml2.2.dylib (compatibility version 10.0.0, current version 10.9.0)</div><div class="line">/System/Library/Frameworks/Security.framework/Security (compatibility version 1.0.0, current version 0.0.0)</div><div class="line">/System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices (compatibility version 1.0.0, current version 66.0.0)</div><div class="line">/System/Library/Frameworks/OpenGLES.framework/OpenGLES (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/AudioToolbox.framework/AudioToolbox (compatibility version 1.0.0, current version 492.0.0)</div><div class="line">/System/Library/Frameworks/OpenAL.framework/OpenAL (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/AVFoundation.framework/AVFoundation (compatibility version 1.0.0, current version 2.0.0)</div><div class="line">/System/Library/Frameworks/CoreMedia.framework/CoreMedia (compatibility version 1.0.0, current version 1.0.0)</div><div class="line">/System/Library/Frameworks/CoreVideo.framework/CoreVideo (compatibility version 1.2.0, current version 1.8.0)</div><div class="line">/System/Library/Frameworks/MapKit.framework/MapKit (compatibility version 1.0.0, current version 14.0.0)</div><div class="line">/usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)</div><div class="line">/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1214.5.1)</div><div class="line">/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation (compatibility version 150.0.0, current version 1144.17.0)</div></pre></td></tr></table></figure>
<p>当然，这些是不够的，我们继续来看一下这条命令。</p>
<p><code>otool -v -arch armv7 -s __TEXT __cstring ~/Payload/JD4iPhone.app/JD4iPhone &gt; ipa_Str.txt</code></p>
<p>我们打开txt之后可以看到如下的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">0187be4a  addNewAddress</div><div class="line">0187be58  addressDefault</div><div class="line">0187be67  kShowPickSitesMap</div><div class="line">0187be79  kPickViewWillApperNotifaction</div><div class="line">0187be97  kPickViewWillDisapperNotifaction</div><div class="line">0187beb8  kOrderPaymentTypeChangedNotification</div><div class="line">0187bedd  OrderPickSieTypeChangedNotification</div><div class="line">0187bf01  kToOrderPickSieTypeVcNotification</div><div class="line">0187bf23  kSelectedPickSiteNotification</div><div class="line">0187bf41  PayAndShipmentTypeViewController</div><div class="line">0187bf62  DeliveryPayType_Confirm</div><div class="line">0187bf7a  complatePayAndShiment</div><div class="line">0187bf90  OrderInfoViewController</div><div class="line">0187bfa8  pickSites</div><div class="line">0187bfb2  kUpdatePickSiteLocation</div><div class="line">0187bfca  paymentType</div></pre></td></tr></table></figure>
<p>这其实是会将ipa中在代码中hard code或者配置文件中的字符串都拉出来，一般有几万行，这里的字符串其实就如同Android中我们查看logcat中有没有敏感词是一样的，这里我们也可以去看看在代码中有没有什么私钥或者其他的敏感信息。我们可以通过一些小技巧来做过滤，比如我们在sublime text中find的时候打开正则匹配，使用正则表达式之后可以简单的找到一些符合我们规律的字符串</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;顺便提一句，iOS的国内安全书我也是遍历了一遍，简直是shit，我只能遍历国外的去了，国内的全部放弃。&lt;/p&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;前言还是让我吐槽爽一把
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>测试技术无用论</title>
    <link href="http://yoursite.com/2016/11/22/testnouse/"/>
    <id>http://yoursite.com/2016/11/22/testnouse/</id>
    <published>2016-11-22T08:21:26.000Z</published>
    <updated>2016-11-22T09:36:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>我先声明，有没有用看你自己，任何事情都是有上下文的，不是100%的。请勿断章取义。文中所提到的观点也许你现在不同意，但是相信未来你可能就会同意。不过无论你同意不同意，在我们没有能力改变这一切之前，我们也只能先follow，慢慢的从自己开始改变，不是么？</strong></p>
<h2 id="对话"><a href="#对话" class="headerlink" title="对话"></a>对话</h2><p>“你思考问题，看问题，做计划要有高度”<br>“我们要有idea，技术不是问题，技术实现的人这个世界一抓一大把”<br>“放眼行业高层，有多少是做技术做上去的？就算做上去的，有多少能够混得风生水起的？”</p>
<p>也许我们在行业的日常中随处都可以听到这样的话语，也许很多人还在努力学习技术，也不关心那么多七七八八的事儿。但是现在行业就是这样的。</p>
<h2 id="技术无用论"><a href="#技术无用论" class="headerlink" title="技术无用论"></a>技术无用论</h2><p>我其实每次从客观的角度来看“众生”的时候，我就觉得很可悲。大多数的高层（level高，薪水高）有生活，有钱，又不用跟技术；而大多数的底层劳动人民每天学技术学的很苦，却又很难有机会往上走，甚至很少机会能够进入一个心仪的公司和环境，这种对比鲜明的景象我已不想再看下去了。</p>
<p>我其实想了下现实与我构思的理想世界还是有差距的。</p>
<h2 id="理想世界"><a href="#理想世界" class="headerlink" title="理想世界"></a>理想世界</h2><table>
<thead>
<tr>
<th>LEVEL</th>
<th style="text-align:center">练级内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>-100</td>
<td style="text-align:center">积累装备：xx证书、学历、实习经验</td>
</tr>
<tr>
<td>0</td>
<td style="text-align:center">毕业，都装纯洁，什么都不懂</td>
</tr>
<tr>
<td>10</td>
<td style="text-align:center">拼命学技术 or 只想不做，抱怨lv100</td>
</tr>
<tr>
<td>20</td>
<td style="text-align:center">积累背景和项目经验＋ 管理lv1+忽悠lv1+社交lv1＋马屁lv1（可选）</td>
</tr>
<tr>
<td>50</td>
<td style="text-align:center">积累背景和项目经验＋ 管理lv30+忽悠lv30+社交lv30＋马屁lv30（可选）</td>
</tr>
<tr>
<td>???</td>
<td style="text-align:center">积累背景和项目经验＋ 管理lv???+忽悠lv???+社交lv???＋马屁lv???（可选）</td>
</tr>
</tbody>
</table>
<p>所以你们也看到了，涨level和技术没有半毛钱关系。。。。但我也不能排除人家当初还是学过技术的对不对</p>
<h2 id="现实世界"><a href="#现实世界" class="headerlink" title="现实世界"></a>现实世界</h2><table>
<thead>
<tr>
<th>LEVEL</th>
<th style="text-align:center">练级内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>-100</td>
<td style="text-align:center">积累装备：xx证书、学历、实习经验</td>
</tr>
<tr>
<td>0</td>
<td style="text-align:center">毕业，都装纯洁，什么都不懂</td>
</tr>
<tr>
<td>10</td>
<td style="text-align:center">拼命学技术 or 只想不做，抱怨lv100</td>
</tr>
<tr>
<td>20</td>
<td style="text-align:center">积累背景和项目经验＋ 管理lv1+忽悠lv1+社交lv1＋马屁lv1（可选）+技术积累lv1+持续学习lv1</td>
</tr>
<tr>
<td>50</td>
<td style="text-align:center">积累背景和项目经验＋ 管理lv30+忽悠lv30+社交lv30＋马屁lv30（可选）+技术积累lv30+持续学习lv30</td>
</tr>
<tr>
<td>???</td>
<td style="text-align:center">积累背景和项目经验＋ 管理lv???+忽悠lv???+社交lv???＋马屁lv???（可选） +技术积累lv1???+持续学习lv???</td>
</tr>
</tbody>
</table>
<p>其实在这个社会混很多是必不可少的，但是更多的需要都有技术的积累和持续学习的态度，否则实则太过不公平，不是么？</p>
<p>测试现在行业几乎很大比例的永远都在lv10，而真正能到lv20以及往上的极少极少。也许很多人看着光鲜亮丽，但事实上也是各种政治斗争的牺牲者，只是你们不知道而已。</p>
<h2 id="我想表达的"><a href="#我想表达的" class="headerlink" title="我想表达的"></a>我想表达的</h2><p>很多人现在学技术是一种兴趣驱动，但是能否一直坚持，一直去紧跟行业的新技术，一直做到35岁，45岁，55岁甚至更久那就是一种态度了，就是我们说的匠者。也许我们不会那么多的技能，但是如果我们能够做技术，学习技术一直坚持，一直做下去，做到一种自己能力的极致，那么我相信机会肯定会降临的。</p>
<p>最后与大家共勉的是“所谓真正的能力和技术每个人都是通过努力所得来的，如果说真的有人有天赋，那么仅仅是他们的学习能力比一般人强，缩短了这个努力的时间罢了”。所以你没有每天坚持学习，你没有去实践，你没有去总结自己，每天都过的很舒适，在现在这个社会就算你很有天赋，那么你也永远在lv10，谢谢。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;我先声明，有没有用看你自己，任何事情都是有上下文的，不是100%的。请勿断章取义。文中所提到的观点也许你现在不同意，但是相信未来你可能就会同意。不过无论你同意不同意，在我们没有能力改变这一切之前，我们也只能先follow，慢慢的从自己开始改变，不是么？&lt;/s
    
    </summary>
    
    
      <category term="other" scheme="http://yoursite.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>致那些情商不高的测试</title>
    <link href="http://yoursite.com/2016/11/22/toTesters/"/>
    <id>http://yoursite.com/2016/11/22/toTesters/</id>
    <published>2016-11-22T08:15:07.000Z</published>
    <updated>2016-11-22T08:17:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上周六在网易继2012年之后再次召开了一次很大的测试会议，这次会议在我看来质量很高。不过会后也有很多朋友来找我聊天，我之后会详细说下，正因为这些朋友找我聊的内容，我才想着我是不是回来要写这样一篇文章。不过最近真的记性不好了，所以就到现在才想起来。</p>
<h2 id="致那些情商不高的测试"><a href="#致那些情商不高的测试" class="headerlink" title="致那些情商不高的测试"></a>致那些情商不高的测试</h2><p>这个社会不是纯纯的吧？测试行业也是一样的，哪个行业都是一样的。没有一个地方是能够让“我只要xxxxx，就能够xxxxx”这句话100%成立的。就算你说你只要自杀，也不见得能够死吧。如果连这件事情都不是100%的，我们为什么能够去认为别的事情就很100%呢？</p>
<p>会后很多人来和我说“我觉得你三年成长简直是脱胎换骨，而我觉得自己却没有进步”，这绝对不止一个人这样和我说。因为网易的两场沙龙，我是唯一的一个两次都上去演讲的讲师。当然当他们说好这句话，其实我自然会很感兴趣的去问他们哪里觉得自己没有进步，却又哪里觉得我进步很大，因为我自己也觉得自己没有什么进步。聊完之后我大概能够明白这其中的原因。其实原本做技术是个很单纯的事情，只不过放在一个有人，有江湖的地方就不单纯了，而测试这个岗位更是佼佼者。</p>
<p>首先我们回顾上我刚刚提出的那个假设句，这个世界上技术的牛逼的人多的是吧（牛逼到改变世界的我们就不要比了），那么我们来看看这句话——我只要技术很牛逼，就能够出人头地，能够赚很多钱，就能够做一份很好的工作，balabala。但事实呢？我们大家都知道，事实并不是这样的，但依然还是有很多人会去做这样的假设，这就是我想说的情商低的表现。</p>
<p>然后我们再来回顾下，这个世界上本科，博士，硕士，海归的人多了去了吧，那么我们来看看这句话——我只要哪里哪里毕业，就能够随心所欲了么？大家也都知道，肯定不是这样的。但是很多人依然会去做这样的假设，这就是我说的情商低的表现。</p>
<p>好了，到这里基本上大家也都知道那些朋友问我的大概是什么问题了。在我看来，3年我和他们的差别并不在技术上，也许技术上有差别，但是这并不是决定性因素。我在这里想说的是</p>
<p>请你们多锻炼自己的表达能力。这事情要去做，不是去想，不是去纠结。就比如我曾经2012年的时候演讲40分钟都觉得困难，而现在可以两天讲16个小时</p>
<p>请你们多扩展自己的视野。看看上面这些问题，哪些人会去相信，大部分是哪些没有拥有的人，比如不觉得自己技术很牛的人，比如说没有本科学历的人，他们特别愿意去相信。但是然并卵其实，最终只不过活在自己的YY中<br>请你们多接触人，活的人，不是充气娃娃。一个人的经历当然是有限的，只有接触很多人，他们的人生才能够丰富我们的经历，不是吗？</p>
<p>请你们多去写代码，而不是去想着怎么提升写代码的水平。想是没有用的</p>
<p>最后一点，请你们学会扬长避短，学会表现，而不是一味的去追求一个东西，比如技术。人是高等生物，不是单细胞生物，不要老是单线程。你们看看我，我每年多少事情要忙，但是学习以及公司里晋升，我哪样落下过？<br>好了，如果你们是那些将来要换工作的人，也希望在面试前看下我写的这几点，绝对不要去用我上面写的假设句，没有意义的。因为也许你单纯，也许你身边的人也单纯，也许面试你的人也单纯，但企业，社会永远不会单纯。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;上周六在网易继2012年之后再次召开了一次很大的测试会议，这次会议在我看来质量很高。不过会后也有很多朋友来找我聊天，我之后会详细说下，正因为
    
    </summary>
    
    
      <category term="other" scheme="http://yoursite.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>iOS_Zombie</title>
    <link href="http://yoursite.com/2016/11/17/iOS-Zombie/"/>
    <id>http://yoursite.com/2016/11/17/iOS-Zombie/</id>
    <published>2016-11-17T01:57:58.000Z</published>
    <updated>2016-11-17T02:10:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近我在看“ I am Zombie”，所以我就来看看iOS的这个工具啦，哈哈，一大群Zombies正在逼近！！！</p>
<h2 id="什么是Zombie"><a href="#什么是Zombie" class="headerlink" title="什么是Zombie"></a>什么是Zombie</h2><p>是的，打开instruments之后其实会看到一个图标，这个图标多么让人激动啊！！哈哈</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/aaaajiangshi.png" alt=""></p>
<p>我们顺便来看下官方文档的说法</p>
<blockquote>
<p>The Zombies template causes persistent memory growth because it changes your environment so that deallocated objects are never technically deallocated. This is expected behavior, but it means that aside from zombie flags and memory address histories, any other statistics provided by the Allocations instrument should be ignored. You also shouldn’t add the Leaks instrument to the Zombies template, as it will produce inaccurate results. For iOS apps, use the Zombies template with the iOS Simulator, rather than a physical device.</p>
</blockquote>
<p>不过我在尝试的时候其实还没有看到这段文字，所以我也是用了真机，不过卡的是一塌糊涂。我查了网上大部分的资料，有的会说Zombie不支持真机，其实就是rather than，你懂的，不过的确不建议用，本身调查的问题在这个环境上关系不大，更多的纯粹就是代码上的问题。</p>
<p>用白话文来解释下吧，取名Zombie其实是有道理的，在iOS中我们经常会有一些对象（虽然iOS在5.0之后引入了ARC）会手动或者自动被ARC销毁掉，但是我们的程序可能并不知道对象不在了，还可能去调用它，导致了EXC_BAD_ACCESS的错误。当然，如果程序简单的话，很容易能够排查出来，但是我们项目中大多是很复杂的，排查起来就有一定的困难。这个时候就会去使用Zombie工具来做辅助。注意，在专项里面工具都是辅助的，没有一个工具是可以说你做了1，2，3，4步骤就知道问题在哪儿，几乎没有，所以专项并不是很多人想的那么简单的。开启Zombie有两种方式，一种是通过instruments来直接使用，网上都会很推荐这种做法，还有一种就是在如下设置中去运行Zombie默认就打包在app中，这种方法很不可取，因为一旦在上线之前忘记关闭这个选项的话可是毁灭性的。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/bbbjiangshi.png" alt=""></p>
<p>简单来讲，Zombie会去取代那些已经被销毁的对象，让这些对象并不是null的存在，而是僵尸的存在。这样做的好处在于能够给予我们更多的info来定位问题，而不好的话也是显而易见的，上面官方的描述也写的很清楚，一旦开启full on Zombie mode（这个词来自于美剧I am Zombie），那么你的应用的内存会不停的飙升，因为你的对象永远都不会销毁，直到app crash。所以这里大家要注意危险性。</p>
<h2 id="什么是ARC"><a href="#什么是ARC" class="headerlink" title="什么是ARC"></a>什么是ARC</h2><p>这其实要详细了解，大家可以自行Google，这里我就随便截图一段，科普一下<br>Automatic Reference Counting，自动引用计数，即ARC，可以说是WWDC2011和iOS5所引入的最大的变革和最激动人心的变化。ARC是新的LLVM 3.0编译器的一项特性，使用ARC，可以说一举解决了广大iOS开发者所憎恨的手动内存管理的麻烦。</p>
<p>在工程中使用ARC非常简单：只需要像往常那样编写代码，只不过永远不写retain,release和autorelease三个关键字就好～这是ARC的基本原则。当ARC开启时，编译器将自动在代码合适的地方插入retain, release和autorelease，而作为开发者，完全不需要担心编译器会做错（除非开发者自己错用ARC了）。好了，ARC相当简单吧～到此为止，本教程结束。</p>
<h2 id="什么是EXC-BAD-ACCESS"><a href="#什么是EXC-BAD-ACCESS" class="headerlink" title="什么是EXC_BAD_ACCESS"></a>什么是EXC_BAD_ACCESS</h2><p>90%的错误来源在于对一个已经释放的对象进行release操作。不过的确看到这个缺陷，项目一复杂，很难去定位。</p>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><p>所有说专项的没有案例都是耍流氓，真心觉得这是真理。<br>我千辛万苦的随便找了一个案例，然后发现启动之后就crash，我心都碎了，那么偶尔我们也要来修一次bug不是？基本上我缩小了范围，错误代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;    </div><div class="line"></div><div class="line">    <span class="comment">// Override point for customization after application launch.</span></div><div class="line"></div><div class="line">    <span class="comment">// Add the navigation controller's view to the window and display.</span></div><div class="line">    [self.window addSubview:navigationController.view];</div><div class="line"></div><div class="line">    [self.window makeKeyAndVisible];</div><div class="line"></div><div class="line">    <span class="keyword">return</span> YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>错误信息如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">2015</span>-<span class="number">09</span>-<span class="number">25</span> <span class="number">21</span>:<span class="number">32</span>:<span class="number">05.749</span> Zombie[<span class="number">24745</span>:<span class="number">854954</span>] *** Terminating app due to uncaught exception <span class="string">'NSInternalInconsistencyException'</span>, reason: <span class="string">'Application windows are expected to have a root view controller at the end of application launch'</span></div></pre></td></tr></table></figure>
<p>反正我是不懂，经过了Google之后，我发现是iOS本身API的改变，应该如下修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;    </div><div class="line"></div><div class="line">    <span class="comment">// Override point for customization after application launch.</span></div><div class="line"></div><div class="line">    <span class="comment">// Add the navigation controller's view to the window and display.</span></div><div class="line">-    [self.window addSubview:navigationController.view];</div><div class="line">+    [self.window setRootViewController:navigationController];</div><div class="line">    [self.window makeKeyAndVisible];</div><div class="line"></div><div class="line">    <span class="keyword">return</span> YES;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>好了，一切就妥妥的了。经过一系列的操作之后我们可以看到：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/cccjiangshi.png" alt=""><br>类似的错误，然后可以看到如下的错误时候的信息<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/dddjiangshi.png" alt=""></p>
<p>好了，接着让我们开启full on Zombie Mode吧。使用Zombie来启动我们的应用，按照同样的操作，我们可以看到crash的时候会出现一个小的紫色旗子，上面的信息告诉我们，明显是一个消息发给一个已经被干掉的对象。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/c0a9281b6f3cdd9851ddfc36fc7386ff.png" alt=""></p>
<p>我们可以点击Zombie这条额外信息的右边的小箭头，可以看到如下的信息</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/c69b4152c196a4dc0ca69b129cab5024.png" alt=""></p>
<p>这里我们可以看到有AutoRelease指向了我们的Zombie project，我们点击进入可以看到：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/6cff1dfd0eeb63447c420914c922d060.png" alt=""></p>
<p>这里的lastString是一个AutoRelease的变量，而_lastString是指向这个字符串的指针，所以当被自动释放的时候，_lastString就指向了一个null，从而就变成了我们最早看到的那个错误。</p>
<p>至此，我们其实只要将lastString手动的保留一下retain，这个程序就不会再crash了。不过这个程序的确还是存在很多的内存泄漏，作为之后的案例还是很不错的。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近我在看“ I am Zombie”，所以我就来看看iOS的这个工具啦，哈哈，一大群Zombies正在逼近！！！&lt;/p&gt;
&lt;h2 id=&quot;什么是Zombie&quot;&gt;&lt;a href=&quot;#什么是Zombie&quot; class=&quot;headerlink&quot; title=&quot;什么是Zombie
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>移动测试人员的未来：测试开发技术的融合</title>
    <link href="http://yoursite.com/2016/11/17/test-future/"/>
    <id>http://yoursite.com/2016/11/17/test-future/</id>
    <published>2016-11-17T01:49:02.000Z</published>
    <updated>2016-11-17T01:52:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>原链接：<a href="http://www.infoq.com/cn/articles/mobile-testing-future" target="_blank" rel="external">http://www.infoq.com/cn/articles/mobile-testing-future</a></p>
<p>作者：陈晔</p>
<p>首先说明，测试包括很多领域，这次谈测试的未来，我只谈移动互联网测试的未来。这些年我和很多公司的同学都做过交流，经过了长时间的交流，基本上对现状有一个清楚的了解，这里就大胆的对未来进行一个预测。</p>
<p>另外我还想说，测试行业还是一个不成熟的行业，学术界和工业界都存在着大量看不清客观事实的人，同样的也存在大量的扯淡的人，本篇文章希望大家都能够认清楚现在的局势，以便更好的认清方向去学习，从而将行业整体推向一个正确的道路上。</p>
<h2 id="过去：从极易到极难"><a href="#过去：从极易到极难" class="headerlink" title="过去：从极易到极难"></a>过去：从极易到极难</h2><p>要预测未来，我们首先必须对过去和现状有一个清晰的了解，所以，下面首先介绍一下移动测试过去是什么样的。</p>
<p>我自己是从09年底开始接触Android无线应用的功能测试，那么就从那个时间开始说起吧。</p>
<p>09年到11年底属于移动互联网测试在中国的第一个阶段，那个阶段几乎网络上除了Android、iOS的官方文档，不存在其它任何相关的测试技术博客或者文档，这对当初接触这个行业的我们是一个非常大的挑战。</p>
<p>对于一个未知的领域，为了保证产品质量，测试必然是从功能方面切入进行。不过好在那个时期的App大多都是纯Native的逻辑，并不像现在那么的复杂。但由于开发整体技术的不成熟以及硬件上不充分的支持，我们最常见的其实就是OOM（Out Of Memory），那个时期真的算是习以为常了。</p>
<p>09年到11年的时候，整个行业的大部分互联网公司都感觉到了移动互联网的到来，这个时候，很多大企业也觉得应该开始储备移动团队和技术基础了，所以开始大范围招人。</p>
<p>初创企业招入的测试肯定是One Man One Team，一个人就相当于一个团队，而大公司的话，会将自己公司内以往做服务端测试，或者Web测试经验丰富的人，拉过来做移动测试团队的leader，然后开始招兵买马。</p>
<p>但无论是哪一类公司，测试工作肯定集中在功能测试用例的设计、执行测试用例上，而且非常的累。所以当时如果你会或者说掌握Android Monkey测试以及iOS的Monkey测试的话，那么已经是神一样的人物了，很多公司会争先恐后的抢着要的。（这里我不得不提一句，我面试了那么多的人，大部分人就是知道基础的命令，也不知道Monkey执行的策略包括实现，这些人就不要说掌握或者熟练了。）</p>
<p>在移动互联网早期，功能测试就被放在了一个很低的位置，直到现在依然没有什么一个很好的改观。</p>
<p>然后过了快2年，各个公司发现，移动互联网不如自己设想中的赚钱，反而烧钱很快。于是11年下半年部分公司就开始裁员了，而首当其冲的就是测试工程师。在这个阶段中，几乎所有公司都不知道自己要招什么样的人，JD（岗位描述）都会很模糊，会写上要移动互联网测试经验，但不知道具体要什么经验。整整2年就处于这样一个阶段，我称之为移动测试第一阶段。</p>
<p>接着12年开始到13年底基本上又是两年，进入了第二阶段。</p>
<p>这个阶段，移动互联网的项目迭代周期也基本定型了，1～2月内一次大迭代，小版本可能每天都有。此时的公司对移动测试的要求也开始具体化——当然，中国是一个跟风严重的国家，比如当初BAT或者各个大公司写出来具体的测试JD，行业的其它公司纷纷开始抄袭，所以这阶段的移动测试的要求基本是从BAT和大公司出来的。</p>
<p>12年开始，行业对测试人员的招聘要求来了一个180度的转变，Robotium，Monkey，Monkeyrunner，Instrumentation，Objective-C，Java，Python等各种详细的要求接踵而来，整个12年的面试会给测试人员一个感觉———面试测试岗位比面试一个CTO岗位都要累。记得某些公司在面试测试人员之前，首先先要笔试，做各种卷子，包括软件工程，测试，算法，代码，智力题等，从我看来简直变态的可以。</p>
<p>另一方面，移动互联网的产品本身从Native开始慢慢的转变成部分Native，部分WebView。Native主要用来实现一些类似于设置、本地界面框架的功能，而WebView更多的会做一些活动界面、广告投放的功能。之后Hybrid混合式应用就变成了移动互联网应用的主流实现方式。测试工作也从以往的纯功能性测试，增加到现在的自动化测试、持续集成、碎片化测试等等。移动测试的技术在这段时间也得到了非常大的进步和提升。</p>
<p>其实在这两年里，还有一个事情让所有人都感觉到非常大的变化，那就是开源的测试技术越来越多。现在很多刚进入移动互联网的测试人会发现单是UI自动化测试就会有几十个框架，根本就不知道选什么。</p>
<h2 id="现状：业务与工具无法兼得"><a href="#现状：业务与工具无法兼得" class="headerlink" title="现状：业务与工具无法兼得"></a>现状：业务与工具无法兼得</h2><p>最近的一年又有了什么变化呢？</p>
<p>从我了解的情况看，各个公司的关注点慢慢从功能测试转到专项测试，又从以往单纯去做UI自动化框架的开发发展到了测试平台化，发展到了线上监控。</p>
<p>前几年，行业大部分公司都在大量招聘业务测试人员，以及所谓的自动化测试工程师。在某些大公司里，整个测试团队分成两部分—————业务团队和工具团队（这里不得不吐槽，其实实际情况是工具组的大部分所谓的测试开发工程师其实就是开发，并没有太多测试的积累）。从2011年开始，百度等公司就开始陆续这样去分团队工作，几年下来的确有着不错的积累，比如各个公司属于自己的框架和平台都搭建起来了，但这样的分工就如双刃剑，让我来和大家说下另外一面吧。</p>
<p>第一点相信很多人心里也都知道，也就是两个组总是不能非常融洽的合作，总有互相的抱怨。所谓一个巴掌拍不响，双方都存在问题：</p>
<ul>
<li>业务方的同学抱怨工具组做的工具不落地，不能触及到业务功能测试的痛点</li>
<li>工具方的同学不停的输出工具，更多的从架构层代码层去改进工具，却忽略了业务的实际真正的用途</li>
<li>业务方和工具方的同学互相不服对方，这点很实际。业务同学大多拼体力，工具方大多拼技术，两者薪资会有一定的差别，公司的重视程度也会有一定的差异，这其中不见得一定哪方好哪方不好，得看公司。</li>
<li>工具组的同学难过的一点就是他们大多并没有自己实际的KPI，更多的是看多少能在业务方落地，也就是说KPI其实是依附于业务方，那么合作就变的尤其重要，但从上面的现状我们看得出来这并非易事。</li>
</ul>
<p>第二点可能很多人就未必知道了。在移动互联网，工具组的同学无非做两样东西————二次开发自动化测试框架和测试平台（兼容性，自动化，监控等）。先说框架这个东西，如果仅仅是API层面的框架，那么的确能够长期有效的使用下去。但移动互联网中工具组大多做的是什么类型的框架呢？你猜对了，正是UIAutomation Framework，过程很黄很暴力，我就不多说了，我们来说结果吧。结果就是大多数业务方用着也不是很爽，所以不停的给工具组提需求，而工具组服务的不止一个业务方，为了KPI只能不停的去接需求，加班修改，最后不仅没有满足业务方，工具组团队先跪了，原因是需求根本来不及满足，Bug也根本就修不完，不停的恶性循环。</p>
<p>所以说，经过这段时间之后，行业里的公司在功能测试上基本都有了一定的积累，然后开始关注应用的性能，因为性能直接关系到用户体验。</p>
<p>同时，行业也意识到功能测试和自动化应该是测试人员的基本能力，而不是一个加分项。</p>
<p>所以到了14年，其实很少看到再有公司要招单纯的自动化测试工程师了，就算有，招入进去的也会承担更多的职责。虽然我很难确认这到底是不是一个进步，但是国内测试行业之前一直很混乱，伸手党横行，大多数人属于自己根本不能自理的状态，所以从这个角度来看，整个行业的技术能力要求提升，算是一个非常不错的趋势了。关于测试行业到底有哪一些捣乱的人，可以移步测试行业感谢有你。</p>
<p>行业现状也能说明这种情况，我能够透露的是，蚂蚁金服从title上面来讲的话，已经不存在“测试工程师”了，全部是“测试开发工程师”，这其实隐约的在暗示点了什么。今年我去了360、百度、JD、OneAPM等公司，同时也和手Q、赶集等同学有了深入的交流。交流下来来看，大家也都隐约的有一种转型。</p>
<h2 id="未来：找出问题还不够，要定位问题"><a href="#未来：找出问题还不够，要定位问题" class="headerlink" title="未来：找出问题还不够，要定位问题"></a>未来：找出问题还不够，要定位问题</h2><p>了解了移动测试的过去和现状，现在可以大胆的预测未来了，不过，这里也仅仅是未来三年内的情况。</p>
<p>首先，测试人员肯定是朝着全栈的方向去发展了，这点毫无疑问。而功能（业务）测试，专项测试，自动化测试等都会变成一个测试人员基本的能力，而非加分项。</p>
<p>而随着网商的发展，各类互联网＋金融的崛起，移动安全的测试将会变成专项测试之后的一个新的关注点。</p>
<p>有些人可能会担心随着第三方测试服务流行，测试工程师的前途在哪，我想说，测试这个岗位和测试这个工作在移动互联网不会消亡，但综合能力的要求提升很多，将来不会再有单纯的业务测试，也不会再有单纯的自动化测试，以后测试将全部是测试开发工程师，这些人可以快速的去适应各种需求，并且能够通过业务和技术的双向分析从而定位真正所在的问题。</p>
<p>测试人员自我能力的提升，也不再是单纯的某一方面技术，而是这些技术如何真正的落地，以及怎么结合自己的业务，以及产品的实现框架去排查和定位问题，最终解决问题或者优化产品性能。</p>
<p>与此同时，开发工程师也会慢慢的被要求承担一部分测试工作（产品自测），不仅能让开发工程师更深入的了解业务，而且本来我们就需要自己去吃自己的狗食（Dog Food）。</p>
<p>举个例子，随着React Native和Html5的发展，很多公司为了满足应用的需求，会开发私有的RCT和WebView容器。同时，很多业务复杂的公司的客户端，背后对接的不仅仅是一个服务，更多的是服务群。那么这个时候问题就出现了：</p>
<p>我们发现了一个客户端很卡，或者有某些安全的风险，那么，我们首先需要去从业务角度分析，可能是哪些业务链路上出现问题，接着我们需要去将被测产品拆开，一个一个排查和定位问题。比如</p>
<ul>
<li>Native Activity View启动消耗</li>
<li>RCT转换到Natvie控件的消耗</li>
<li>WebView自定义容器的消耗</li>
<li>Html中的CSS，JS，PNG等流量和时间的消耗</li>
<li>Native业务代码调用RPC，http请求的方法的消耗</li>
<li>本地请求到得到返回的时间消耗</li>
<li>数据交互的Json结构是否复杂，json解析的消耗</li>
<li>本地业务逻辑是否编写恰当</li>
<li>客户端在智能机上的界面绘制的消耗</li>
<li>整个架构View是否存在重复绘制</li>
<li>服务群中互相交互以及透传的逻辑是否恰当</li>
<li>服务群中的系统超时机制是否恰当</li>
<li>服务群中每个系统的消耗</li>
</ul>
<p>我们会发现，其实我们并不能一下子就能够找到问题在什么地方，而是需要对业务和被测应用技术了解的情况下，去慢慢排除哪些地方没有问题，从而最终定位问题所在。此时的你光有技术，或者你光懂业务，都无法去完成这样一个工作。测试人员很大的一部分价值会体现在这个地方。</p>
<p>也许看到这里，很多测试同学就要跳起来了，觉得要求怎么那么高，感觉就在扯淡，肯定不是这样。我想说的是：</p>
<p>第一，目前测试圈很多人以为自己的圈子就是这个行业的全部，但其实测试的内涵比他们想象的要大的多。</p>
<p>第二，很多人被培训忽悠（什么自称xxx培训第一），觉得单纯的学习技术就可以提升价值，你们自己想想看，测试真的只是一个纯技术岗位吗？</p>
<p>第三，国内测试原本长时间存活在低要求环境中，导致很多人已经不知道正常的要求是什么了，当行业开始以正确的标准来要求的时候，就感觉无法接受。</p>
<p>大家只要抛弃成见，自然知道谁对谁错，也会知道应该怎么去面对未来，只要勇于承认，并且快速学习，未来的测试仍然有你的一席之地。</p>
<p>说到这里，很多测试管理者可能会问，管理者的出路在何方。</p>
<p>其实对于管理者而言，现在应该已经有所感受了，就是纯管理角色在移动互联网很难存活下去。原因有两个，其一，测试本身的技术定位要求，以及技术的更新速度会倒逼着管理者需要有一定的技术基础，包括对一些新技术有一定的了解，否则如何将合适的人安排在合适的位置上呢？又如何去服众呢？其二，未来的转变不仅仅是测试技术和业务的融合，更多的是就业人员从85后转变成了90后以及95后。以往很多管理者觉得给员工一些钱，一些股票，这些员工就会默默无闻的为公司卖命，为项目去加班。但是随着时代的发展，现在很多的年轻人看重事情变成：工作是否开心以及是否对自己有提升。他们不是不在乎钱，但他们会变的更有自己的想法和追求。面临这样一群人，管理者本身的管理方式也需要有一定的改变，同时需要从公司的流程，业务发展，个人规划，技术发展等各个角度去给出一些引导。</p>
<p>差不多以上就是我想表达的观点了，也许很多人已经看到了变化，也许很多人没有，但是无论如何，变化总在快速的，不以任何人的意志而转移的进行下去。最后，如何想了解更多移动测试发展的话，可以关注我写的书《大话移动App测试2.0——技术篇》，会在明年上半年出版，这会是全新的一本书。粗略的目录可见： <strong>大话移动App测试2.0一书</strong>。其中我也会将这次我全程参与钱包9.0研发过程中的一些经历和技术写在里面。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;原链接：&lt;a href=&quot;http://www.infoq.com/cn/articles/mobile-testing-future&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.infoq.com/cn/articles/mobi
    
    </summary>
    
    
      <category term="other" scheme="http://yoursite.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>iOS Core Animation (II)</title>
    <link href="http://yoursite.com/2016/11/16/CoreAnimationII/"/>
    <id>http://yoursite.com/2016/11/16/CoreAnimationII/</id>
    <published>2016-11-16T06:54:24.000Z</published>
    <updated>2016-11-16T07:06:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>之前是有聊到图层和视图的关系，Core Animation还有其他很多的方式可以用</p>
<p>本文例子和描述引用了iOS-Core-Animation-Advanced-Techniques</p>
<h2 id="CAShapeLayer"><a href="#CAShapeLayer" class="headerlink" title="CAShapeLayer"></a>CAShapeLayer</h2><p>CAShapeLayer是一个通过矢量图形而不是bitmap来绘制的图层子类。你指定诸如颜色和线宽等属性，用CGPath来定义想要绘制的图形，最后CAShapeLayer就自动渲染出来了。当然，你也可以用Core Graphics直接向原始的CALyer的内容中绘制一个路径，相比直下，使用CAShapeLayer有以下一些优点：</p>
<ul>
<li>渲染快速。CAShapeLayer使用了硬件加速，绘制同一图形会比用Core Graphics快很多。</li>
<li>高效使用内存。一个CAShapeLayer不需要像普通CALayer一样创建一个寄宿图形，所以无论有多大，都不会占用太多的内存。</li>
<li>不会被图层边界剪裁掉。一个CAShapeLayer可以在边界之外绘制。你的图层路径不会像在使用Core Graphics的普通CALayer一样被剪裁掉（如我们在第二章所见）。</li>
<li>不会出现像素化。当你给CAShapeLayer做3D变换时，它不像一个有寄宿图的普通图层一样变得像素化。</li>
</ul>
<p>GCPath可以绘制一个简单的图像，这个图像并非是一种直线，也不一定要是一个闭合的图。用一个CAShapeLayer渲染一个简单的火柴人。CAShapeLayer属性是CGPathRef类型，但是我们用UIBezierPath帮助类创建了图层路径，这样我们就不用考虑人工释放CGPath了</p>
<p>代码见下图：<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/49c021ee5368939c69f2dd7cbf5d9751.png" alt="core1"></p>
<p>我们看到如下的效果：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/3c037c75d4ca07cf02114bd1fe76ec3e.png" alt="core2"></p>
<h2 id="instruments"><a href="#instruments" class="headerlink" title="instruments"></a>instruments</h2><p>我们除了使用Core Animation提供的一些方法以外，我们也可以在instrments中去使用Core Animation来进行性能的调优。<br>使用了Core Animation提供的例子。我们看到了一个list的demo，默认是带有阴影的图片和文字。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/205b7213c80bd36e4b1dfc818424b3da.gif" alt="core3"></p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/f36ed3d642dc7f0f00d7b4a32bca9037.gif" alt="core3"></p>
<p>然后我们可以去掉图片和文字的阴影。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//   cell.imageView.layer.shadowOffset = CGSizeMake(0, 5);</span></div><div class="line"> <span class="comment">//   cell.imageView.layer.shadowOpacity = 0.75;</span></div><div class="line"><span class="comment">//    cell.textLabel.layer.shadowOffset = CGSizeMake(0, 2);</span></div><div class="line"> <span class="comment">//   cell.textLabel.layer.shadowOpacity = 0.5;</span></div></pre></td></tr></table></figure>
<p>然后我们再重新测试一遍。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/aaaa49c1fcf36fb68c607b.gif" alt="core3"></p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/6__11__2015_15_27.gif" alt="core"></p>
<p><code>iOS-Core-Animation-Advanced-Techniques</code>是非常好的一个docs，不过测试讲的还是不是很多，更多的是原理的解释和介绍了常用的方法。感谢iOS的文档</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;之前是有聊到图层和视图的关系，Core Animation还有其他很多的方式可以用&lt;/p&gt;
&lt;p&gt;本文例子和描述引用了iOS-Core-Animation-Advanced-Techniques&lt;/p&gt;
&lt;h2 id=&quot;CAShapeLayer&quot;&gt;&lt;a href=&quot;#CAS
    
    </summary>
    
    
      <category term="IOS" scheme="http://yoursite.com/tags/IOS/"/>
    
  </entry>
  
  <entry>
    <title>Swift REPL</title>
    <link href="http://yoursite.com/2016/11/16/SwiftREPL/"/>
    <id>http://yoursite.com/2016/11/16/SwiftREPL/</id>
    <published>2016-11-16T02:32:09.000Z</published>
    <updated>2016-11-16T02:42:19.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是REPL"><a href="#什么是REPL" class="headerlink" title="什么是REPL"></a>什么是REPL</h2><p>当初最早升级Xcode6.1的时候就在Command Line Tool中增加了这个特性来辅助Swift开发，全称叫做Read Eval Print Loop。其实和我们之前提到的groovysh和python是一样的一个特性，属于交互性模式，但是swift这个REPL使用下来却是体验最好的一个。可惜当初在OSX 10.9的版本时候提示需要10.10才可以使用。所以现在我们在OS X Yosemite下就可以正常使用</p>
<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><p>我们在终端中输入xcrun swift即可唤起这个交互模式</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/49686ff843ee6519e2c2f2d09e4cb123.gif" alt="swift1"></p>
<p>我们来写个简单的例子来看看REPL的一些反馈和效果</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/5129723ab792cdc842fd792bc200fdf4.gif" alt="swift2"></p>
<p>多行的例子，这里使用了隐性定义字符串的方式。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/d0a906e773eba61e117d4081adeca620.gif" alt="swift3"></p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/111111.gif" alt="swift4"></p>
<p>另外我们如果定义一个方法的话，这个也是我觉得体验很好的一点，如下</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/222222.gif" alt="swift5"></p>
<p>另外如果需要使用上面写过的方法或者重新要调试的话，可以通过上下进行整个方法每一行的调用。如下</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/333333.gif" alt="swift6"></p>
<h2 id="更多REPL的快捷键"><a href="#更多REPL的快捷键" class="headerlink" title="更多REPL的快捷键"></a>更多REPL的快捷键</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Arrow Keys        Move cursor left/right/up/down</div><div class="line">Control+F        Move cursor right one character, same as right arrow</div><div class="line">Control+B        Move cursor left one character, same as left arrow</div><div class="line">Control+N        Move cursor to end of next line, same as down arrow</div><div class="line">Control+P        Move cursor to end of prior line, same as up arrow</div><div class="line">Control+D        Delete the character under the cursor</div><div class="line">Option+Left        Move cursor to start of prior word</div><div class="line">Option+Right    Move cursor to start of next word</div><div class="line">Control+A        Move cursor to start of current line</div><div class="line">Control+E        Move cursor to end of current line</div><div class="line">Delete            Delete the character to the left of the cursor</div><div class="line">Esc &lt;            Move cursor to start of first line</div><div class="line">Esc &gt;            Move cursor to end of last line</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是REPL&quot;&gt;&lt;a href=&quot;#什么是REPL&quot; class=&quot;headerlink&quot; title=&quot;什么是REPL&quot;&gt;&lt;/a&gt;什么是REPL&lt;/h2&gt;&lt;p&gt;当初最早升级Xcode6.1的时候就在Command Line Tool中增加了这个特性来辅助Swi
    
    </summary>
    
    
      <category term="swift" scheme="http://yoursite.com/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>我的东西是我的。我给你，你可以拿着。我不给，你不该怨我。</title>
    <link href="http://yoursite.com/2016/11/16/mineismine/"/>
    <id>http://yoursite.com/2016/11/16/mineismine/</id>
    <published>2016-11-16T02:27:03.000Z</published>
    <updated>2016-11-16T02:27:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天我在微信上面转发了一条信息引来了很多的赞。<br>“我的东西是我的。我给你，你可以拿着，我不给，你不该怨我，更不能抢，对你好是珍惜，而不是觉得理所当然。太多人不明白这个道理了”</p>
<p>下面有两个回复我这里想表明下。</p>
<ol>
<li>恒温问我“对于女人你敢这样说吗？”我的回答是我承认和女人的确没有办法去谈这种。去谈的时候，女人的逻辑大多是“你的就是我的，我的还是我的”</li>
<li>有一个朋友问我“对那些很亲密的人怎么办”我的回答是，在我看来，除了自己的家人以外，没有什么可以突破上面这条真理的亲密。看上下文，要撕逼快点撕就是了。我的东西为什么要给你啊，给我个理由先。如果都已经会去对所谓的“亲密”的人考虑这类问题的时候，那么也就不亲密了</li>
</ol>
<p>这句话很多人点赞的理由我猜测肯定是乍一看觉得很有道理，当然现在在看这篇文章的你们是不是也觉得很有道理呢？如果觉得有道理，我默认认为你们是认可这个观念的，但是这句话最后提到很多人不明白这个道理，原因就是在于，当这个事情我们作为旁观者角度来看的确很清楚，但是往往就是自己身在其中的时候就不自觉了。。。</p>
<p>先说最近testerhome群里一直提到的“伸手”这件事情吧。最近很多人在问有没有Appium的入门教程，入门视频。然后就开始很多人开始说自己的观点。</p>
<ol>
<li>Appium的入门教程哪里有，怎么都没有人写</li>
<li>Appium的教程是有了，但是没有视频，谁有空去录个视频给大家学习学习</li>
</ol>
<p>不外乎如此，首先提出需求谁不会呢？更何况这种2b需求（我不是鄙视所有的产品经理），关键是需求的实现。那么这个时候如果有人跳出来说他们不对的话，或者说我们就是不录，我们就是没空去写，怎么样等等。那么肯定要吵起来。<br>ok，到了这里，我们看下上面那段话，是不是就能够很完美的解释了。“我的知识是我的，我录制，我写文章给你，你可以拿着。我不给。你不要来埋怨我，更不能来骂我，对你好你要珍惜，而不是觉得理所当然。如果觉得我们就应该为你服务，请你能滚多远滚多远，我们不是爱人，你们也不是我们的父母，所以明白这个道理么？”</p>
<p>然后我们再来说个例子吧。很多员工在年终的时候，对年终奖和加薪总是一种很神奇的态度，希望公司多给点。这当然没有错，但事实是年终是你一年工作的结果的一种展现，而不是施舍。公司的hr们更不应该抱有“公司给你那么多是看得起你，请你更加好好干活”，拜托，将来好不好好干活和这次年终半毛钱关系？那么我们继续看下上面那段话。解释一下“我付出的努力就是我的，你应该给我，这就是我的，你不给，那么你就是在抢，更不应该理直气壮的抢，对公司付出是看得起公司的未来，不要认为我生下来就是给你们卖命的，如果你觉得给年终和加薪是对我们的一种施舍，那么请能滚多远滚多远，我们不是离开某公司就活不下去了，所以明白这个道理么？”</p>
<p>所以你现在还觉得很有道理么？还很认可么？如果是，那么请在日常生活中永远记得这点，不要老是去给别人莫名其妙的盖马桶盖子，也不要莫名其妙的跪舔别人。</p>
<p>我的东西是我的。我给你，你可以拿着，我不给，你不该怨我，更不能抢，对你好是珍惜，而不是觉得理所当然</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天我在微信上面转发了一条信息引来了很多的赞。&lt;br&gt;“我的东西是我的。我给你，你可以拿着，我不给，你不该怨我，更不能抢，对你好是珍惜，而不是觉得理所当然。太多人不明白这个道理了”&lt;/p&gt;
&lt;p&gt;下面有两个回复我这里想表明下。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;恒温问我“对于女人你
    
    </summary>
    
    
      <category term="other" scheme="http://yoursite.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>Android Studio 简单配置多渠道包案例</title>
    <link href="http://yoursite.com/2016/11/16/multi-app/"/>
    <id>http://yoursite.com/2016/11/16/multi-app/</id>
    <published>2016-11-16T02:15:14.000Z</published>
    <updated>2016-11-16T02:22:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>该配置解决了多渠道包和多渠道号的打包问题，并且使用简单的配置文件</p>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>新建一个AS工程，工程截图如下<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/30569fe8190ca41bfe76a70a7e665c28.png" alt="android1"></p>
<p>我们新建一个channel.txt，并且增加渠道名字和渠道号</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">baidu:<span class="number">1111</span></div><div class="line"><span class="number">360</span>:<span class="number">2222</span></div><div class="line"><span class="number">91</span>:<span class="number">3333</span></div><div class="line">:<span class="number">4444</span></div><div class="line">:<span class="number">5555</span></div><div class="line">wandoujia:<span class="number">6666</span></div></pre></td></tr></table></figure>
<p>为了使得我们的配置能够生效，需要修改manifest.xml，增加如下两行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;!-- app pid --&gt;</div><div class="line"> &lt;meta-data android:name=<span class="string">"CHANNEL_ID"</span> android:value=<span class="string">"$&#123;APP_PID_PLACEHOLDER&#125;"</span> /&gt;</div><div class="line"> &lt;!-- app key --&gt;</div><div class="line"> &lt;meta-data android:name=<span class="string">"CHANNEL_NAME"</span> android:value=<span class="string">"$&#123;APP_KEY_PLACEHOLDER&#125;"</span> /&gt;</div></pre></td></tr></table></figure>
<p>同样的build.gradle也需要进行相应的修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    repositories &#123;</div><div class="line">        mavenCentral()</div><div class="line">    &#125;</div><div class="line">    dependencies &#123;</div><div class="line">        classpath <span class="string">'com.android.tools.build:gradle:1.0.0'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">tasks.withType(JavaCompile) &#123; options.encoding = <span class="string">"UTF-8"</span> &#125;</div><div class="line"></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">22</span></div><div class="line">    buildToolsVersion <span class="string">"22.0.1"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.example.monkey.multichannelapk"</span></div><div class="line">        minSdkVersion <span class="number">10</span></div><div class="line">        targetSdkVersion <span class="number">22</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    sourceSets &#123;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// Move the tests to tests/java, tests/res, etc...</span></div><div class="line">        instrumentTest.setRoot(<span class="string">'tests'</span>)</div><div class="line"></div><div class="line">        <span class="comment">// Move the build types to build-types/&lt;type&gt;</span></div><div class="line">        <span class="comment">// For instance, build-types/debug/java, build-types/debug/AndroidManifest.xml, ...</span></div><div class="line">        <span class="comment">// This moves them out of them default location under src/&lt;type&gt;/... which would</span></div><div class="line">        <span class="comment">// conflict with src/ being used by the main source set.</span></div><div class="line">        <span class="comment">// Adding new build types or product flavors should be accompanied</span></div><div class="line">        <span class="comment">// by a similar customization.</span></div><div class="line">        debug.setRoot(<span class="string">'build-types/debug'</span>)</div><div class="line">        release.setRoot(<span class="string">'build-types/release'</span>)</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    packagingOptions &#123;</div><div class="line">        exclude <span class="string">'META-INF/DEPENDENCIES.txt'</span></div><div class="line">        exclude <span class="string">'META-INF/LICENSE.txt'</span></div><div class="line">        exclude <span class="string">'META-INF/NOTICE.txt'</span></div><div class="line">        exclude <span class="string">'META-INF/NOTICE'</span></div><div class="line">        exclude <span class="string">'META-INF/LICENSE'</span></div><div class="line">        exclude <span class="string">'META-INF/DEPENDENCIES'</span></div><div class="line">        exclude <span class="string">'META-INF/notice.txt'</span></div><div class="line">        exclude <span class="string">'META-INF/license.txt'</span></div><div class="line">        exclude <span class="string">'META-INF/dependencies.txt'</span></div><div class="line">        exclude <span class="string">'META-INF/LGPL2.1'</span></div><div class="line">    &#125;</div><div class="line">    productFlavors &#123;</div><div class="line">        def path=<span class="string">"./channel.txt"</span></div><div class="line">        file(path).eachLine &#123; line-&gt;</div><div class="line">            def words = line.split(<span class="string">':'</span>)</div><div class="line">            def key = words[<span class="number">0</span>]</div><div class="line">            def channel = words[<span class="number">1</span>]</div><div class="line">            <span class="keyword">if</span> (key == <span class="string">''</span>) &#123;</div><div class="line">                key = channel</div><div class="line">            &#125;</div><div class="line">            def name = <span class="string">'s'</span>+channel</div><div class="line">            <span class="string">"$name"</span> &#123;</div><div class="line">                manifestPlaceholders=[APP_KEY_PLACEHOLDER:key, APP_PID_PLACEHOLDER:name]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></div><div class="line">    compile 'com.android.support:appcompat-v7:22.1.1'</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打出的包可以在如下一次性找到：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/334faeef3a64bc3af69243ad6a93f675.png" alt="multi"></p>
<p>最后附上打包gif</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/0a527d7cee2a5423abecd4e0811b6ff2.gif" alt="gif"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;该配置解决了多渠道包和多渠道号的打包问题，并且使用简单的配置文件&lt;/p&gt;
&lt;h2 id=&quot;过程&quot;&gt;&lt;a href=&quot;#过程&quot; class=&quot;
    
    </summary>
    
    
      <category term="android" scheme="http://yoursite.com/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>Espresso 2.0 源码解析 （一）</title>
    <link href="http://yoursite.com/2016/11/16/espresso-code1/"/>
    <id>http://yoursite.com/2016/11/16/espresso-code1/</id>
    <published>2016-11-16T02:06:18.000Z</published>
    <updated>2016-11-16T02:12:24.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>之前其实我已经写过了Espresso2.0使用AS和Gradle执行用例的Sample，详细可以见Testerhome之前的帖子。其实接着我还是想看看Espresso的实现。所以就有了这篇文章，但是代码量太大，也来不及看，所以其实想一边写这篇文章一边看的。嗯。<br>下载之后导入即可看到下面的图示，证明你已经拿到了游戏中的第一个item。 </p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espresso11.png" alt="espresso1"></p>
<h2 id="慢慢看"><a href="#慢慢看" class="headerlink" title="慢慢看"></a>慢慢看</h2><p>接着我们先来看testrunner，单纯从名字来看其实感觉是不是Espresso自己的runner呢，现在还不知道，我们打开所有的目录大概浏览下。如下<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espresso22.png" alt="espresso2"></p>
<p>这个时候我们眼前一亮，看到了一个熟悉的名字GoogleInstrumentation，点击进去一看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span></span></div><div class="line"><span class="title">GoogleInstrumentation</span></div><div class="line"><span class="keyword">extends</span> <span class="title">ExposedInstrumentationApi</span></div></pre></td></tr></table></figure>
<p>那么好吧，我表示不明白extends这个东西有啥用，那么继续去看了ExposedInstrumentationApi。整个代码还是很简单的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.google.android.apps.common.testing.testrunner;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.app.Activity;</div><div class="line"><span class="keyword">import</span> android.app.Fragment;</div><div class="line"><span class="keyword">import</span> android.app.Instrumentation;</div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.content.Intent;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"><span class="keyword">import</span> android.os.IBinder;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Exposes select hidden android apis to the compiler.</div><div class="line"> * These methods are stripped from the android.jar sdk compile time jar, however</div><div class="line"> * are called at runtime (and exist in the android.jar on the device).</div><div class="line"> *</div><div class="line"> * This class is built with neverlink=1 to ensure it is never actually included in</div><div class="line"> * our apk.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">ExposedInstrumentationApi</span> <span class="keyword">extends</span> <span class="title">Instrumentation</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> ActivityResult <span class="title">execStartActivity</span><span class="params">(</span></span></div><div class="line">            Context who, IBinder contextThread, IBinder token, Activity target,</div><div class="line">            Intent intent, <span class="keyword">int</span> requestCode, Bundle options) &#123;</div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execStartActivities</span><span class="params">(Context who, IBinder contextThread,</span></span></div><div class="line">            IBinder token, Activity target, Intent[] intents, Bundle options) &#123;</div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> ActivityResult <span class="title">execStartActivity</span><span class="params">(</span></span></div><div class="line">        Context who, IBinder contextThread, IBinder token, Fragment target,</div><div class="line">        Intent intent, <span class="keyword">int</span> requestCode, Bundle options) &#123;</div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> ActivityResult <span class="title">execStartActivity</span><span class="params">(</span></span></div><div class="line">      Context who, IBinder contextThread, IBinder token, Activity target,</div><div class="line">      Intent intent, <span class="keyword">int</span> requestCode) &#123;</div><div class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么这里我们看到了其实应该使用了Instrumentation下面的方法，所以继续调查了execStartActivity这个方法，发现该方法其实在MonitoringInstrumentation下面，这个类我们可以认为是Instrumentation的一个扩展，那么在下面我们找到了这里使用的几个方法。</p>
<p>但是在Android文档中并没有对该方法有什么描述，我表示就很焦虑了。接着我继续Google了这个方法到底要干嘛。突然发现了如下的知识，嗯<br>以下是StartActivity方法的将Activity调起来的部分过程</p>
<blockquote>
<p>从Activity类的startActivity()方法开始，这个方法会调用Activity类中的public void startActivityForResult()方法 startActivityForResult()方法会调用Instrumentation类中的public ActivityResult execStartActivity()方法，这个方法加上了{@hide}对外是不可见的</p>
</blockquote>
<p>这里眼前又一亮，因为我们看到了在启动Activity的过程中第二步就会去调用这个execStartActivity方法，而且这个方法本身是hide的。那么到这里，我们终于明白了，为什么ExposedInstrumentationApi文件夹目录叫做hidden了。然后我们也理解了源码中的第一句话。</p>
<ul>
<li>Exposes select hidden android apis to the compiler. 由于该方法本身是隐藏的，所以我们需要暴露出来以之后被使用。<br>到这里，我们差不多知道ExposedInstrumentationApi是干什么的了，那么接着我们继续来看GoogleInstrumentation。</li>
</ul>
<h2 id="继续一步一步"><a href="#继续一步一步" class="headerlink" title="继续一步一步"></a>继续一步一步</h2><p>Instrumentation方法下原本就有onCreate方法，而在这里Espresso重写了该方法。如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle arguments)</span> </span>&#123;</div><div class="line">  Log.i(LOG_TAG, <span class="string">"Instrumentation Started!"</span>);</div><div class="line">  tryLoadingIntentSpy();</div><div class="line">  InstrumentationRegistry.registerInstance(<span class="keyword">this</span>);</div><div class="line">  ActivityLifecycleMonitorRegistry.registerInstance(lifecycleMonitor);</div><div class="line"></div><div class="line">  handlerForMainLooper = <span class="keyword">new</span> Handler(Looper.getMainLooper());</div><div class="line">  mainThread = Thread.currentThread();</div><div class="line">  executorService = Executors.newCachedThreadPool();</div><div class="line">  Looper.myQueue().addIdleHandler(idleHandler);</div><div class="line">  <span class="keyword">super</span>.onCreate(arguments);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个方法开始我看着还是觉得很奥妙的。比如这里的tryLoadingIntentSpy();,当然这个方法还是很重的，我们继续来看实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">tryLoadingIntentSpy</span><span class="params">()</span> </span>&#123;</div><div class="line">  <span class="comment">// Wouldn't it be easier to call IntentSpyImpl.getInstance() and be done with it? We don't do</span></div><div class="line">  <span class="comment">// this to avoid bringing in common lib dependencies (which cause painful conflicts with some</span></div><div class="line">  <span class="comment">// android projects) into G3ITR. Instead, we try to load IntentSpyImpl via reflection. Projects</span></div><div class="line">  <span class="comment">// that don't have intento in deps will not have IntentSpyImpl included at runtime (i.e. we</span></div><div class="line">  <span class="comment">// proceed as normally) and leave intentSpy as null (to be checked later). However, if it is</span></div><div class="line">  <span class="comment">// loaded, we can call any method of IntentSpy.</span></div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    Class&lt;?&gt; c = Class.forName(<span class="string">"com.google.android.apps.common.testing.intento.IntentSpyImpl"</span>);</div><div class="line">    intentSpy = (IntentSpy) c.getMethod(</div><div class="line">        <span class="string">"load"</span>, Context.class, Context.class).invoke(<span class="keyword">null</span>, getTargetContext(), getContext());</div><div class="line">    Log.i(LOG_TAG, <span class="string">"IntentSpyImpl loaded"</span>);</div><div class="line">  &#125; <span class="keyword">catch</span> (ClassNotFoundException cnfe) &#123;</div><div class="line">    Log.i(LOG_TAG, <span class="string">"IntentSpyImpl not loaded: "</span> + cnfe.getMessage());</div><div class="line">  &#125; <span class="keyword">catch</span> (NoSuchMethodException nsme) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">        <span class="string">"IntentSpyImpl is available at runtime, but getInstance method was not found"</span>, nsme);</div><div class="line">  &#125; <span class="keyword">catch</span> (SecurityException se) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">        <span class="string">"IntentSpyImpl is available at runtime, but calling it failed."</span>, se);</div><div class="line">  &#125; <span class="keyword">catch</span> (IllegalAccessException iae) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">        <span class="string">"IntentSpyImpl is available at runtime, but calling it failed."</span>, iae);</div><div class="line">  &#125; <span class="keyword">catch</span> (IllegalArgumentException iare) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">        <span class="string">"IntentSpyImpl is available at runtime, but calling it failed."</span>, iare);</div><div class="line">  &#125; <span class="keyword">catch</span> (InvocationTargetException ite) &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</div><div class="line">        <span class="string">"IntentSpyImpl is available at runtime, but calling it failed."</span>, ite);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其实注释已经写的很清楚了，我不知道我理解的对不对。从实现上其实就是为了避免各种错误所以使用了反射的机制来获取这个运行的Intent，拿到这个intentSpy之后，我们就可以使用下面的方法了，不过稍等，这个intentSpy又是个什么鬼。我们看上面的目录结构，其实可以看到有两个interface。</p>
<p>其实简单看了下这个interface，就是实现了若干方法，也是为了拿到Activity的一些东西，先不管了。继续往下看。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">InstrumentationRegistry.registerInstance(<span class="keyword">this</span>);</div><div class="line">ActivityLifecycleMonitorRegistry.registerInstance(lifecycleMonitor);</div></pre></td></tr></table></figure>
<p>这两个其实查了下Android文档，其实就是两个监听的方法。描述类似</p>
<blockquote>
<p>Records/exposes the instrumentation currently running and stores a copy of the instrumentation arguments Bundle in the registry.<br>那么在onCreate中调用也是可以理解，肯定后续会使用到。</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;源代码&quot;&gt;&lt;a href=&quot;#源代码&quot; class=&quot;headerlink&quot; title=&quot;源代码&quot;&gt;&lt;/a&gt;源代码&lt;/h2&gt;&lt;p&gt;之前其实我已经写过了Espresso2.0使用AS和Gradle执行用例的Sample，详细可以见Testerhome之前的帖子。其
    
    </summary>
    
    
      <category term="espresso" scheme="http://yoursite.com/tags/espresso/"/>
    
  </entry>
  
  <entry>
    <title>Android Gradle 自定义效果控件案例</title>
    <link href="http://yoursite.com/2016/11/14/GradleDIY/"/>
    <id>http://yoursite.com/2016/11/14/GradleDIY/</id>
    <published>2016-11-14T07:38:47.000Z</published>
    <updated>2016-11-14T07:45:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近感叹啊。。国内VPN又开始各种不稳了。Android Studio也好，SDK也罢，好吧，又都卡住了。再这样下去，没有办法活了。。。</p>
<p>使用的案例：<a href="https://github.com/monkeytest15/CircularReveal" target="_blank" rel="external">https://github.com/monkeytest15/CircularReveal</a></p>
<p>首先我们先来说下Gradle本身引用aar的三种方式：</p>
<blockquote>
<p>jcenter()或者maven</p>
<p>本地直接引用aar</p>
<p>打包aar之前，本地library直接的引用</p>
</blockquote>
<p>checkout这个案例之后，很容易看出来属于第三种。当然在该项目的文档中也给出了如何本地直接引入aar以及怎么远程引用。也就是说自定义控件的效果可通过多种方式进行直接使用。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gradle3.png" alt="gradle3"></p>
<p>在CircularReveal中定义了两个自定义的布局，AndroidManifest文件中也能够看得出来gradle中library和app module的区别。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;manifest package="io.codetail.view"&gt;</div><div class="line"></div><div class="line">    &lt;application /&gt;</div><div class="line"></div><div class="line">&lt;/manifest&gt;</div></pre></td></tr></table></figure>
<p>library的AndroidManifest还是非常简单的。我们参考上面提到的Android Gradle 模块化开发实例 Demo的方法，我们可以直接编译出我们自定义的布局的aar文件，然后直接本地引用。<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gradle4.png" alt="gradle3"></p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gradle5.gif" alt="gradle5"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近感叹啊。。国内VPN又开始各种不稳了。Android Studio也好，SDK也罢，好吧，又都卡住了。再这样下去，没有办法活了。。。&lt;/p&gt;
&lt;p&gt;使用的案例：&lt;a href=&quot;https://github.com/monkeytest15/CircularReveal
    
    </summary>
    
    
      <category term="Gradle" scheme="http://yoursite.com/tags/Gradle/"/>
    
  </entry>
  
  <entry>
    <title>Groovy 的现状见解</title>
    <link href="http://yoursite.com/2016/11/14/groovy-dis/"/>
    <id>http://yoursite.com/2016/11/14/groovy-dis/</id>
    <published>2016-11-14T07:27:32.000Z</published>
    <updated>2016-11-14T07:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><ul>
<li>软件开发：</li>
</ul>
<p>国内做grails大多是lancer和小公司为主，散落的很多；这个，jvm上各个语言都差不多。<br>大公司，thoughtworks，百度，阿里都有，BAT大多做擦边项目（比如阿里也有rails team，一直再被逼转java, nodejs） 使用领域主要是网页（grails强项），少量做api开发和其他的（比如swing等，没错！swing仍然坚挺）。还有就是用来写一些工具的东西，由于与测试和环境的共通性，放到测试里说 grails做快速开发的原型还是不错的，因为动态的特性，加上ROO，：）<br>另外：groovy for android正在快速崛起，很多尝过gradle甜头的，开始探索了（我这的安卓就在这么干）</p>
<ul>
<li>业务设计</li>
</ul>
<p>这个是groovy的强项，得益于groovy的script engine，拿groovy做模版做dsl的大有人在（比如java上有很多做jvm javascript）的；比如写模型，写分析程序，写算法（尼玛SQL都能写贝叶斯公式呢）<br>scala的actor和match是神器：）</p>
<ul>
<li>测试：</li>
</ul>
<p>几个方面groovy都远远胜过java和其他语言（以前我非常狂妄的对上司说java是马，ruby是驴，jruby……），关键是groovy是java的私生子，没有其他jvm语言的兼容性问题： groovy很多自带的语言特性，先天对测试友好（比如groovy自己的sql）<br>groovy的闭包等特性，做mock stub就是大杀气<br>groovy的mop纯动态特性，非常适合解决java里一些繁琐的问题<br>groovy的构建工具gant, gradle对编程的出色支持<br>groovy的scipt template engine适合简化一切任务<br>所有jvm上的库，groovy都能无缝调用和简化<br>groovy不需要编译，特别适合写一些工具脚本，比如jmx管理！！！！别惊异，还真有人这么干，运维有，做jvm的也有，现在跑到南湾区的阿里撒加就是各中好手</p>
<ul>
<li>圈子</li>
</ul>
<p>groovy生产上，国内，应用的不比scala少（因为scala的门槛较高；scala + jvm），反而OTP等国内应用的较多）；但是都比较散；相比之下，圈子就有集中的特性了： 最大的圈子是在西安。以前国内定期聚会都在那里。以前groovyq的老窝也在那里。北京，成都也有（有thoughtworks布道的地方都有）。 教学上，少量学校有尝试作为教学语言，主要原因是门槛比java低，便于理解（随便举个，你让新手理解Java迭代器vs 闭包上的迭代器试试） 测试圈子里就更少，我认识的也聊聊数人（北京，西安，合肥，呵呵，我圈子小么。。），可能和测试的圈子有特性，本身测试行业，对代码深刻理解的人少，一口气把23设计模式报出来的都不多 lancer圈子算一个。 最后：jdk7,8,里很多特性是groovy和scalar上先出来的，并且很明显妈妈把私生子的东西学去了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;h2 id=&quot;正文&quot;&gt;&lt;a href=&quot;#正文&quot; class=&quot;headerlink&quot; title=&quot;正文&quot;&gt;&lt;/a&gt;正文&lt;/h2&gt;&lt;ul&gt;
&lt;
    
    </summary>
    
    
      <category term="Groovy" scheme="http://yoursite.com/tags/Groovy/"/>
    
  </entry>
  
  <entry>
    <title>Appium Python Client 简单解析</title>
    <link href="http://yoursite.com/2016/11/14/appium-python/"/>
    <id>http://yoursite.com/2016/11/14/appium-python/</id>
    <published>2016-11-14T06:00:18.000Z</published>
    <updated>2016-11-14T07:13:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>目录</p>
<p>我们clone下来之后，能够在Appium目录下看到如下的结构</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── __init__.py</div><div class="line">├── common</div><div class="line">│   ├── __init__.py</div><div class="line">│   └── exceptions.py</div><div class="line">├── saucetestcase.py</div><div class="line">└── webdriver</div><div class="line">    ├── __init__.py</div><div class="line">    ├── common</div><div class="line">    │   ├── __init__.py</div><div class="line">    │   ├── mobileby.py</div><div class="line">    │   ├── multi_action.py</div><div class="line">    │   └── touch_action.py</div><div class="line">    ├── connectiontype.py</div><div class="line">    ├── errorhandler.py</div><div class="line">    ├── mobilecommand.py</div><div class="line">    ├── switch_to.py</div><div class="line">    ├── webdriver.py</div><div class="line">    └── webelement.py</div></pre></td></tr></table></figure>
<p>就如python本身语言一样还是比较清晰的，其中一层common目录以及saucetestcase我就不多说了，这个自己理解下就很简单了，其实大部分的篇幅还是注释，对作者表示致敬。</p>
<p>文件查看</p>
<p>那么自然我们就来详细看下webdrvier下面的文件了。一个一个来看吧。</p>
<blockquote>
<p>init.py<br>嗯，python工程、模块运行安装基础文件，该文件为空，但必须存在</p>
<p>mobileby.py</p>
</blockquote>
<p>部分代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">from selenium.webdriver.common.<span class="function">by <span class="keyword">import</span> By</span></div><div class="line"></div><div class="line"></div><div class="line">class <span class="title">MobileBy</span><span class="params">(By)</span>:</div><div class="line">    IOS_UIAUTOMATION = <span class="string">'-ios uiautomation'</span></div><div class="line">    ANDROID_UIAUTOMATOR = <span class="string">'-android uiautomator'</span></div><div class="line">    ACCESSIBILITY_ID = <span class="string">'accessibility id'</span></div></pre></td></tr></table></figure>
<p>这个文件在这里就是对寻找控件的方式做了一个定义，当然其实看到这里，我不知道有没有同学就有疑问了，你能看懂这个是一个类，但这个类的参数By到底是个啥。好吧，其实我也不懂，但是我求助了webdriver的docs，By的定义如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">These are the attributes which can be used to locate elements. See the Locating Elements chapter <span class="keyword">for</span> example usages.</div><div class="line"></div><div class="line">The By implementation.</div></pre></td></tr></table></figure>
<p>我初步理解了下，就是定位元素的一种方式，但是到底有哪些方式呢，其实还是没有看懂，所以进一步的看了下扩展。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class selenium.webdriver.common.by.By</div><div class="line">Bases: object</div><div class="line"></div><div class="line">Set of supported locator strategies.</div><div class="line"></div><div class="line">classmethod is_valid(by)</div><div class="line">CLASS_NAME = 'class name'</div><div class="line">CSS_SELECTOR = 'css selector'</div><div class="line">ID = 'id'</div><div class="line">LINK_TEXT = 'link text'</div><div class="line">NAME = 'name'</div><div class="line">PARTIAL_LINK_TEXT = 'partial link text'</div><div class="line">TAG_NAME = 'tag name'</div><div class="line">XPATH = 'xpath'</div></pre></td></tr></table></figure>
<p>定义的方式还是很多的，当然这个大家会在后面感觉到更熟悉的，我们接着往下看。</p>
<p>部分代码</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">import copy</div><div class="line"></div><div class="line">from appium.webdriver.mobilecommand import MobileCommand as Command</div><div class="line"></div><div class="line"></div><div class="line">class MultiAction(object):</div><div class="line">    def __init__(self, driver, element=None):</div><div class="line">        self._driver = driver</div><div class="line">        self._element = element</div><div class="line">        self._touch_actions = []</div><div class="line"></div><div class="line">    def add(self, *touch_actions):</div><div class="line">        """Add TouchAction objects to the MultiAction, to be performed later.</div><div class="line"></div><div class="line">        :Args:</div><div class="line">         - touch_actions - one or more TouchAction objects describing a chain of actions to be performed by one finger</div><div class="line"></div><div class="line">        :Usage:</div><div class="line">            a1 = TouchAction(driver)</div><div class="line">            a1.press(el1).move_to(el2).release()</div><div class="line">            a2 = TouchAction(driver)</div><div class="line">            a2.press(el2).move_to(el1).release()</div><div class="line"></div><div class="line">            MultiAction(driver).add(a1, a2)</div><div class="line">        """</div><div class="line">        for touch_action in touch_actions:</div><div class="line">            if self._touch_actions is None:</div><div class="line">                self._touch_actions = []</div><div class="line"></div><div class="line">            # deep copy, so that once they are in here, the user can't muck about</div><div class="line">            self._touch_actions.append(copy.deepcopy(touch_action))</div><div class="line"></div><div class="line">    def perform(self):</div><div class="line">        """Perform the actions stored in the object.</div><div class="line"></div><div class="line">        :Usage:</div><div class="line">            a1 = TouchAction(driver)</div><div class="line">            a1.press(el1).move_to(el2).release()</div><div class="line">            a2 = TouchAction(driver)</div><div class="line">            a2.press(el2).move_to(el1).release()</div><div class="line"></div><div class="line">            MultiAction(driver).add(a1, a2).perform()</div><div class="line">        """</div><div class="line">        self._driver.execute(Command.MULTI_ACTION, self.json_wire_gestures)</div><div class="line"></div><div class="line">        # clean up and be ready for the next batch</div><div class="line">        self._touch_actions = []</div><div class="line"></div><div class="line">        return self</div></pre></td></tr></table></figure>
<p>其实这边其实第一个我表示我就没有理解，这个copy的模块有啥用，查看了下代码，其中使用到了深度复制deepcopy，从官方文档的解释来看像是连带着对象的属性也都会全部复制过来，并且开一个新的内存进行存放，应该是更有效率。从文件名字我们可以知道这是一个定义多操作的文件，然后从类的初始化我们能够看到很熟悉的参数，appium一个操作通常的参数，driver、element、action，首先定义了一个添加的方法，为了让单一的步骤肯定进行叠加，然后出现了perform这个重要的方法，这个方法是让用户去定义一个操作链，这个也就是这个所谓的多操作。那么其实看到这里我表示我又不是很这个_drvier.execute到底是个什么方法呢，继续查看了webdriver官方文档。如下解释</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">execute(driver_command, params=None)</div><div class="line">Sends a command to be executed by a command.CommandExecutor.</div><div class="line"></div><div class="line">Args:   </div><div class="line">driver_command: The name of the command to execute as a string.</div><div class="line">params: A dictionary of named parameters to send with the command.</div><div class="line">Returns:    </div><div class="line">The command’s JSON response loaded into a dictionary object.</div></pre></td></tr></table></figure>
<p>那么就解释通了，两个参数，一个命令一个参数列表。同时也知道了原来返回的是一个字典，怪不得我看别的代码的时候不是很明白这个语法，接着看之后的文件分析就知道了，后面很多的操作封装都会用到这个方法的返回。</p>
<p>既然这个文件中引入了<br><code>from appium.webdriver.mobilecommand import MobileCommand as Command</code></p>
<p>那么我们就随着这个来讲下MobileCommand。<br>部分源码</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class MobileCommand(object):</div><div class="line">    CONTEXTS = 'getContexts',</div><div class="line">    GET_CURRENT_CONTEXT = 'getCurrentContext',</div><div class="line">    SWITCH_TO_CONTEXT = 'switchToContext'</div><div class="line">    TOUCH_ACTION = 'touchAction'</div><div class="line">    MULTI_ACTION = 'multiAction'</div><div class="line">    OPEN_NOTIFICATIONS = 'openNotifications'</div><div class="line">    GET_NETWORK_CONNECTION = 'getNetworkConnection'</div><div class="line">    SET_NETWORK_CONNECTION = 'setNetworkConnection'</div><div class="line">    GET_AVAILABLE_IME_ENGINES = 'getAvailableIMEEngines'</div><div class="line">    IS_IME_ACTIVE = 'isIMEActive'</div><div class="line">    ACTIVATE_IME_ENGINE = 'activateIMEEngine'</div><div class="line">    DEACTIVATE_IME_ENGINE = 'deactivateIMEEngine'</div><div class="line">    GET_ACTIVE_IME_ENGINE = 'getActiveEngine'</div><div class="line">    TOGGLE_LOCATION_SERVICES = 'toggleLocationServices'</div></pre></td></tr></table></figure>
<p>这个文件我不想讲了。。太过简单，没有东西可讲了。。。。。</p>
<p>switch_to.py<br>部分代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">from selenium.webdriver.remote.switch_to <span class="keyword">import</span> SwitchTo</div><div class="line"></div><div class="line">from .<span class="function">mobilecommand <span class="keyword">import</span> MobileCommand</span></div><div class="line"></div><div class="line"></div><div class="line">class <span class="title">MobileSwitchTo</span><span class="params">(SwitchTo)</span>:</div><div class="line">    def <span class="title">context</span><span class="params">(self, context_name)</span>:</div><div class="line">        """</div><div class="line">        Sets the context <span class="keyword">for</span> the current session.</div><div class="line"></div><div class="line">        :Args:</div><div class="line">         - context_name: The name of the context to <span class="keyword">switch</span> to.</div><div class="line"></div><div class="line">        :Usage:</div><div class="line">            driver.switch_to.<span class="title">context</span><span class="params">(<span class="string">'WEBVIEW_1'</span>)</span></div><div class="line">        """</div><div class="line">        self._driver.<span class="title">execute</span><span class="params">(MobileCommand.SWITCH_TO_CONTEXT, &#123;<span class="string">'name'</span>: context_name&#125;)</span></div></pre></td></tr></table></figure>
<p>其实我先是去查了switch_to，但是我不是很明白为啥文档里啥都没有写。然后我看了下Appium的文档，虽然明白这个是native和webview的一种切换，并且现在已经放入了Selenium3的规范中，但是还是不是很明白这个类的作用，直到我看到了下面的Sample</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function">def <span class="title">test_move_back_to_native_context</span><span class="params">(self)</span>:</span></div><div class="line">    self.<span class="title">_enter_webview</span><span class="params">()</span></div><div class="line">    self.driver.switch_to.<span class="title">context</span><span class="params">(None)</span></div><div class="line">    self.<span class="title">assertEqual</span><span class="params">(<span class="string">'NATIVE_APP'</span>, self.driver.current_context)</span></div><div class="line"></div><div class="line">def <span class="title">_enter_webview</span><span class="params">(self)</span>:</div><div class="line">    btn = self.driver.find_element_by_name(<span class="string">'buttonStartWebviewCD'</span>)</div><div class="line">    btn.click()</div><div class="line">    self.driver.switch_to.context(<span class="string">'WEBVIEW'</span>)</div></pre></td></tr></table></figure>
<p>但是这个是不是可以自定义我还没有研究过，从例子看应该是可以的。</p>
<p>webdriver.py<br>其实到这个文件了已经是个集合了，我们回过头来看self.execute这个方法，其实现在就能够明白了，只要返回值的后面会有[‘value’]，因为一个字典嘛。不查文档果然是看不懂的，当然也有很多方法直接返回一个字典的。具体我就不贴了，大家自己看了。</p>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><p>其实结构还是蛮清晰的，但是就是流程，代码层面一步一步怎么走还不是很清晰，需要进一步看Sample再来理解了。不过总体我感觉比其他语言好理解点。因为其实就是一个Client嘛。哈哈</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;目录&lt;/p&gt;
&lt;p&gt;我们clone下来之后，能够在Appium目录下看到如下的结构&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;
    
    </summary>
    
    
      <category term="Appium" scheme="http://yoursite.com/tags/Appium/"/>
    
  </entry>
  
  <entry>
    <title>Gradle Project With Espresso2.0</title>
    <link href="http://yoursite.com/2016/11/14/espresso-2/"/>
    <id>http://yoursite.com/2016/11/14/espresso-2/</id>
    <published>2016-11-14T05:20:41.000Z</published>
    <updated>2016-11-14T05:38:54.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>就最近Google进行了SDK的更新，同样的提供了部分框架的更新以及合入了部分的框架。这里的Espresso就是其中的一个。详细的我们可以查看这次support library的更新：<a href="http://developer.android.com/tools/testing-support-library/index.html" target="_blank" rel="external">http://developer.android.com/tools/testing-support-library/index.html</a></p>
<p>既然Espresso被合入的话，那么是不是和以前的使用方式不同呢，就进行一下新的尝试。不过令人高兴的是在code.google上面2天前也对于Espresso2.0进行了相对应的doc更新，真的非常贴心，详细可见：<a href="https://code.google.com/p/android-test-kit/wiki/EspressoSetupInstructions" target="_blank" rel="external">https://code.google.com/p/android-test-kit/wiki/EspressoSetupInstructions</a></p>
<p>例子的代码见：<a href="https://github.com/monkeytest15/Espresso2.0-demo/tree/master" target="_blank" rel="external">https://github.com/monkeytest15/Espresso2.0-demo/tree/master</a></p>
<p>这里也再一张2.0更新的总结图<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espress1.png" alt="espresso1"></p>
<h2 id="尝试"><a href="#尝试" class="headerlink" title="尝试"></a>尝试</h2><p>那么我们接下来同样的使用AS新建一个Gradle的工程，在这个例子中我起名是Espress_V2</p>
<p>——–我是分割线君——–<br>详细设置如下<br>App目录下的build.gradle文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">21</span></div><div class="line">    buildToolsVersion <span class="string">"21.1.2"</span></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.example.monkey.espresso_v2"</span></div><div class="line">        minSdkVersion <span class="number">16</span></div><div class="line">        targetSdkVersion <span class="number">21</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    packagingOptions&#123;</div><div class="line">        exclude <span class="string">'LICENSE.txt'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    <span class="comment">// App's dependencies, including test</span></div><div class="line">    compile <span class="string">'com.android.support:support-annotations:21.0.3'</span></div><div class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></div><div class="line">    compile 'com.android.support:appcompat-v7:21.0.3'</div><div class="line">    <span class="comment">//Espresso Testing-only dependencies</span></div><div class="line">    androidTestCompile <span class="title">files</span><span class="params">(<span class="string">'libs/espresso-1.1-bundled.jar'</span>)</span></div><div class="line">    androidTestCompile <span class="title">files</span><span class="params">(<span class="string">'libs/testrunner-1.1*.jar'</span>)</span></div><div class="line">    androidTestCompile 'com.android.support.test.espresso:espresso-core:2.0'</div><div class="line">    androidTestCompile 'com.android.support.test:testing-support-lib:0.1'</div><div class="line">    androidTestCompile 'com.jayway.android.robotium:robotium-solo:5.3.1'</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>这里要注意的是新的这个testrunner的更新，否则会报出各种错误，而且这个设置的确和以前不同。android.support.test.runner.AndroidJUnitRunner</strong></p>
<p><strong>test class的编写</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.example.monkey.espresso_v2;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">import</span> android.test.ActivityInstrumentationTestCase2;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> android.support.test.espresso.Espresso.onView;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> android.support.test.espresso.assertion.ViewAssertions.matches;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> android.support.test.espresso.matcher.ViewMatchers.isDisplayed;</div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> android.support.test.espresso.matcher.ViewMatchers.withText;</div><div class="line"><span class="keyword">import</span> com.robotium.solo.Solo;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * &lt;a href="http://d.android.com/tools/testing/testing_android.html"&gt;Testing Fundamentals&lt;/a&gt;</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationTest</span> <span class="keyword">extends</span> <span class="title">ActivityInstrumentationTestCase2</span>&lt;<span class="title">MainActivity</span>&gt; </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">    Solo solo;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ApplicationTest</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(MainActivity.class);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">super</span>.setUp();</div><div class="line">        solo = <span class="keyword">new</span> Solo(getInstrumentation(), getActivity());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testHelloWorld</span><span class="params">()</span> </span>&#123;</div><div class="line">        String TextViewString = getActivity().getString(R.string.hello_world);</div><div class="line"></div><div class="line">        onView(withText(TextViewString)).check(matches(isDisplayed()));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里可以看出来已经可以直接引用SDK中的包了。</p>
<h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><p><strong>第一个就是我上面提到的TestRunner的更新</strong><br><strong>第二个就是如下的设置</strong><br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espresso2.png" alt="espresso2"></p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>AS其实还是非常贴心的，尤其在测试方面。来一张直接通过AS进行执行测试的结果图：<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espresso3.png" alt="espresso2"></p>
<p>AS也支持结果的report输出，包括各种我们需要的格式，多贴心。<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espresso4.png" alt="espresso2"></p>
<p>另外最后我也通过了终端的方式进行了再次的测试，如下结果（这个也是自动化必须的），同时我们的报告可以在这个路径下找到<br>~/app/build/outputs/reports。<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/espresso5.png" alt="espresso2"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;就最近Google进行了SDK的更新，同样的提供了部分框架的更新以及合入了部分的框架。这里的Espresso就是其中的一个。详细的我们可以查
    
    </summary>
    
    
      <category term="espresso" scheme="http://yoursite.com/tags/espresso/"/>
    
  </entry>
  
  <entry>
    <title>Android 获取应用的大小</title>
    <link href="http://yoursite.com/2016/11/09/AndroidAppSize/"/>
    <id>http://yoursite.com/2016/11/09/AndroidAppSize/</id>
    <published>2016-11-09T05:58:01.000Z</published>
    <updated>2016-11-09T06:22:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近在搭建兼容性性能平台，目前架构图还是内部才能够看到，具体之后做完我会开放出来。<br>其中一个就是需要去获取Android应用的大小，我们现在自身的apk还是会做的尽量小，但是用了一段时间之后apk的占用量就会越来越大，自然这个也是性能测试需要监控的数据之一。</p>
<p>在这里我们用到了如下的：<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/android1.png" alt="android1"></p>
<p>核心代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PkgSizeObserver</span> <span class="keyword">extends</span> <span class="title">IPackageStatsObserver</span>.<span class="title">Stub</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGetStatsCompleted</span><span class="params">(PackageStats pStats, <span class="keyword">boolean</span> succeeded)</span></span></div><div class="line">            <span class="keyword">throws</span> RemoteException &#123;</div><div class="line">        <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">        cachesize = pStats.cacheSize;</div><div class="line">        datasize = pStats.dataSize;</div><div class="line">        codesize = pStats.codeSize;</div><div class="line">        totalsize = cachesize + datasize + codesize;</div><div class="line">        Log.i(TAG, <span class="string">"cachesize---&gt;"</span> + cachesize + <span class="string">" datasize----&gt;"</span></div><div class="line">                + datasize + <span class="string">" codeSize----&gt;"</span> + codesize);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以及</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryPacakgeSize</span><span class="params">(String pkgName)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">    <span class="keyword">if</span> (pkgName != <span class="keyword">null</span>) &#123;</div><div class="line">        PackageManager pm = getPackageManager();</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            Method getPackageSizeInfo = pm.getClass().getDeclaredMethod(</div><div class="line">                    <span class="string">"getPackageSizeInfo"</span>, String.class, </div><div class="line">                    IPackageStatsObserver.class);</div><div class="line"></div><div class="line">            getPackageSizeInfo.invoke(pm, pkgName,</div><div class="line">                    , <span class="keyword">new</span> PkgSizeObserver());</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">            Log.e(TAG, <span class="string">"NoSuchMethodException"</span>);</div><div class="line">            ex.printStackTrace();</div><div class="line">            <span class="keyword">throw</span> ex;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接着就发现一个问题，2.3的版本的确可以用。但是4.2以及以上版本就报错了。经过调查发现 PackageManager.getPackageSizeInfo(String packageName, IPackageStatsObserver observer)不可用，改为PackageManager.getPackageSizeInfo(String packageName, int userHandle, IPackageStatsObserver observer)。<br>所以我们代码需要做如下的修改：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">queryPacakgeSize</span><span class="params">(String pkgName)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">if</span> (pkgName != <span class="keyword">null</span>) &#123;</div><div class="line">            PackageManager pm = getPackageManager();</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                Method getPackageSizeInfo = pm.getClass().getDeclaredMethod(</div><div class="line">-                       <span class="string">"getPackageSizeInfo"</span>, String.class, </div><div class="line">+                       <span class="string">"getPackageSizeInfo"</span>, String.class, <span class="keyword">int</span>.class,</div><div class="line">                        IPackageStatsObserver.class);</div><div class="line"></div><div class="line">                getPackageSizeInfo.invoke(pm, pkgName,</div><div class="line">-                       , <span class="keyword">new</span> PkgSizeObserver());</div><div class="line">+                       Process.myUid() / <span class="number">100000</span>, <span class="keyword">new</span> PkgSizeObserver());</div><div class="line"></div><div class="line">            &#125; <span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">                Log.e(TAG, <span class="string">"NoSuchMethodException"</span>);</div><div class="line">                ex.printStackTrace();</div><div class="line">                <span class="keyword">throw</span> ex;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>然后我install到了Nexus5 Android5.0上面，点击一个应用之后看到如下Log，说明成功了～～～<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/android2.png" alt="android2"><br>这个会作为我监听apk中的一个模块存在～～～</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近在搭建兼容性性能平台，目前架构图还是内部才能够看到，具体之后做完我会开放出来。&lt;br&gt;其中一个就是需要去获取Android应用的大小，我们现在自身的apk还是会做的尽量小，但是用了一段时间之后apk的占用量就会越来越大，自然这个也是性能测试需要监控的数据之一。&lt;/p&gt;

    
    </summary>
    
    
      <category term="Android性能" scheme="http://yoursite.com/tags/Android%E6%80%A7%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>iOS 微信 信息都是明文的！！！</title>
    <link href="http://yoursite.com/2016/11/08/iOS-anquan/"/>
    <id>http://yoursite.com/2016/11/08/iOS-anquan/</id>
    <published>2016-11-08T05:27:25.000Z</published>
    <updated>2016-11-08T06:08:41.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="微信版本"><a href="#微信版本" class="headerlink" title="微信版本"></a>微信版本</h2><p>iOS上面的weixin 6.1.1，其实这个问题很早就有了</p>
<h2 id="问题所在"><a href="#问题所在" class="headerlink" title="问题所在"></a>问题所在</h2><p>不需要越狱，不需要用户名密码，微信DB的message没有加密</p>
<h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>我们首先链接手机，打开如下界面，选择到微信，找到DB<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/iOSanquan1.png" alt="iOSanquan"></p>
<p>接着我们打开这个MM.sqlite，可以看到如下界面</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/iOSanquan2.png" alt="iOSanquan2"></p>
<p>chat开头的这些表都是我们的聊天的分类</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/iOSanquan3.png" alt="iOSanquan3"></p>
<p>接着我们随便打开一个chat就能够看到如下信息</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/iOSanquan4.png" alt="iOSanquan4"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>但是不管怎么样，加密总比不加密的好，另外这样的话，等于我拿到任何一个手机都可以直接看到聊天记录，或者在越狱之后，我通过alpine到任何一台手机上，然后拿到里面的这个文件。不知道除了聊天记录以外，红包记录有没有呢。。＝ ＝。。银行卡记录。。。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;微信版本&quot;&gt;&lt;a href=&quot;#微信版本&quot; class=&quot;headerlink&quot; title=&quot;微信版本&quot;&gt;&lt;/a&gt;微信版本&lt;/h2&gt;&lt;p&gt;iOS上面的weixin 6.1.1，其实这个问题很早就有了&lt;/p&gt;
&lt;h2 id=&quot;问题所在&quot;&gt;&lt;a href=&quot;#问题所
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>我只是没有退路，所以才做到这个程度</title>
    <link href="http://yoursite.com/2016/11/08/noway/"/>
    <id>http://yoursite.com/2016/11/08/noway/</id>
    <published>2016-11-08T03:11:37.000Z</published>
    <updated>2016-11-08T03:13:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天在下飞机之后看到了这篇文章，起初是被文章标题所吸引的，看着看着共鸣就实在太多了。</p>
<h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>在这里我先饮用下文章最后的一段话。</p>
<blockquote>
<p>有时候，我们很容易就把优秀和勤奋混淆。有些人是轻而易举，更多的人是很努力，才能看上去轻而易举。很多人之所以不优秀，只是因为他们有太多出路，而不需要太过勤奋。你试试把退路都断了，其实你也能做到这个程度。</p>
</blockquote>
<p>我不说我自己多么优秀，但是到现在也有了五湖四海的朋友。许多很早就认识了我，许多人许多今天刚认识我，但可以肯定的是，对我的认识和看法各有不同。不过无论在大家眼中我是怎么样的一个人，我自己知道的是我绝对不能算一个能够“轻而易举”的人，更不能算一个“努力”的人，最多最多算一个“运气好”的人。</p>
<h2 id="学生时代"><a href="#学生时代" class="headerlink" title="学生时代"></a>学生时代</h2><p>我记得我的初中是在一所区重点所读，但浑浑噩噩3年过去，很多同学都上了自己梦想的高中，我却去了一所体育专长的高中，从我那个时候看来我根本不适合读书，整天都在网吧玩游戏</p>
<p>记得高中的时候，也和很多人一样我也曾经梦想着考上各种高大上的大学，但是随着时间的推迟，我也知道我根本也不是这块料，从最早想考一本到最后的二本直到最后查询成绩的当晚看到自己落榜，只去了一所非常烂的专科的时候，才发现这一切是那么的真实。</p>
<p>我家庭并不富裕，去了专科之后，也和其他同学一样，每天不怎么上课就在玩dota。一玩就是几年玩过去了，当初金融危机找工作的景象现在都历历在目。无论什么工作，每当寝室里面一个人说自己找到工作，自己的心里就会咯噔一下，然后问自己怎么办，幻想着自己能够找到什么工作。</p>
<h2 id="打工和最初的工作"><a href="#打工和最初的工作" class="headerlink" title="打工和最初的工作"></a>打工和最初的工作</h2><p>我依稀记得在大三（专科的最后一年），有空我就出去打工，也算为自己争取一点生活费。办完健康证在超市里面做试吃员，社会就是那么的现实，每天给我半个小时的吃饭时间，必须在楼梯上蹲着吃，然后试吃的量必须达标否则不给钱。但我依然坚持了下来，为什么？因为没有退路，也许，至少那个时候没有人觉得我很优秀吧。。。。</p>
<p>最后找工作的时候，看过我书后序的人都知道，我最早的一份工作是硬件维修，每天至少出外勤去3家公司维修房顶的天线，先不说苦不苦，危险性极大，没有任何保险措施，每个月500元.为什么？因为没有退路。</p>
<p>某次工伤之后我实在没有办法，选择了一家创业公司，老板问我“测试你做不做？”。我问“测试是做什么的？”，老板答“就是玩玩游戏的，不难”。然后我就走上了这条道路。2个月的试用期，最后的考题是“顺利的跑通monkey”。我最终还是没有完成这个指标，因为我实在不知道怎么做这些东西。虽然我最终没有被开除，但拿着是身边同龄开发工程师1/5的工资在工作，我觉得非常自卑和没有脸面，但为什么我愿意做下去？因为我没有退路。</p>
<h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>如果你能够看到这里，相信你能够明白我最初说的那些话，我根本不够聪明，我根本也不够努力，一切只是因为我一直觉得我没有退路，人要生存，这就是本能。而所谓的运气仅仅是我最初进入的是一家纯移动互联网公司。这里引用我之前和云层的一段对话。<br>“云层：我觉得你在你的年龄能够走到现在几乎就是奇迹”<br>”我：我自己很清楚，如果和我的背景和我的出身一样的人，能和我现在一样的话在测试行业可能很难出现第二个，但很大一部分原因是我第一份正式工作就是做Android的。如果我像大部分测试一样先做了web、server等测试，那么也许我现在还是伸手党，我工作10年也走不到现在的程度”<br>“云层：是的，没错”</p>
<p>一切只是因为没有退路，我们要永远不要去认为自己是优秀的，努力的，甚至有天赋的人。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天在下飞机之后看到了这篇文章，起初是被文章标题所吸引的，看着看着共鸣就实在太多了。&lt;/p&gt;
&lt;h2 id=&quot;引子&quot;&gt;&lt;a href=&quot;#引子&quot; class=&quot;headerlink&quot; title=&quot;引子&quot;&gt;&lt;/a&gt;引子&lt;/h2&gt;&lt;p&gt;在这里我先饮用下文章最后的一段话。&lt;/p
    
    </summary>
    
    
      <category term="other" scheme="http://yoursite.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>Android GPU 过渡绘制小 Demo，真正的测试</title>
    <link href="http://yoursite.com/2016/11/07/AndroiGPU/"/>
    <id>http://yoursite.com/2016/11/07/AndroiGPU/</id>
    <published>2016-11-07T07:26:47.000Z</published>
    <updated>2016-11-07T07:48:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近也是年底了，大家也是各忙各的，有的炫耀年终奖，有的炫耀维多利亚的秘密。反正各种炫耀。</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>嗯，你没有进错。这里是性能板块。我们还是回归正题吧。毕竟在大话移动2.0上面我们也要说点性能的东西。最近也是一边在外演讲一边自己学习中。我们这里拿一个应用来看吧。首先打开手机中的该项设置。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gpu1.png" alt="gpu1"></p>
<h2 id="尝试测试"><a href="#尝试测试" class="headerlink" title="尝试测试"></a>尝试测试</h2><p>我们打开我们要测试的应用（注意这个是一个demo），进入主页面之后我们看到如下的界面。</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gpu2.png" alt="gpu2"></p>
<p>也许有同学就要说了，啊呀不对啊。这个颜色这样了。有bug！！！但是问题就在这里。到了这里我们根本不能算测试完毕，这个至少在正确的认知中，这样最多是测试不完整，因为你并不知道问题出在哪里。所以接着我们还是要继续做的，首先我们要来判断是不是有问题。</p>
<h2 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h2><p>GPU绘制过渡，</p>
<p>颜色标识: 从好到差:蓝-绿-淡红-红</p>
<p>蓝色1x过度绘制<br>绿色2x过度绘制<br>淡红色3x过度绘制<br>红色超过4x过度绘制<br>那么大家大概能够心里有数了。接着我们要来真正的测试了。</p>
<h2 id="排查"><a href="#排查" class="headerlink" title="排查"></a>排查</h2><p>那么首先我们先来看下UI的结构。如下图，我们得知是CustomViewAbove这个View。<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gpu3.png" alt="gpu3"><br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gpu4.png" alt="gpu4"></p>
<p>我们必须追查到代码里，主要我们会关注两个。</p>
<ol>
<li>构造函数</li>
<li>重写的各种draw的方法</li>
</ol>
<p>我们在代码中看到如下构造方法和draw的方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CustomViewAbove</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">    <span class="keyword">this</span>(context, <span class="keyword">null</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">CustomViewAbove</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>(context, attrs);</div><div class="line">    initCustomViewAbove();</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">initCustomViewAbove</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// setDescendantFocusability(FOCUS_AFTER_DESCENDANTS);</span></div><div class="line">    <span class="keyword">this</span>.setBackgroundColor(getResources().getColor(</div><div class="line">        R.color.backColor));</div><div class="line">    setDescendantFocusability(FOCUS_BEFORE_DESCENDANTS);</div><div class="line">    setClickable(<span class="keyword">true</span>);</div><div class="line">    setFocusable(<span class="keyword">true</span>);</div><div class="line">    setWillNotDraw(<span class="keyword">false</span>);</div><div class="line">    <span class="keyword">final</span> Context context = getContext();</div><div class="line">    mScroller = <span class="keyword">new</span> Scroller(context, sInterpolator);</div><div class="line">    <span class="keyword">final</span> ViewConfiguration configuration = ViewConfiguration.get(context);</div><div class="line">    mTouchSlop = ViewConfigurationCompat</div><div class="line">            .getScaledPagingTouchSlop(configuration);</div><div class="line">    mMinimumVelocity = configuration.getScaledMinimumFlingVelocity();</div><div class="line">    mMaximumVelocity = configuration.getScaledMaximumFlingVelocity();</div><div class="line">    setInternalPageChangeListener(<span class="keyword">new</span> SimpleOnPageChangeListener() &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (mViewBehind != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">switch</span> (position) &#123;</div><div class="line">                <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">                <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">                    mViewBehind.setChildrenEnabled(<span class="keyword">true</span>);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">                    mViewBehind.setChildrenEnabled(<span class="keyword">false</span>);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="keyword">final</span> <span class="keyword">float</span> density = context.getResources().getDisplayMetrics().density;</div><div class="line">    mFlingDistance = (<span class="keyword">int</span>) (MIN_DISTANCE_FOR_FLING * density);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>首先我们从主界面上面可以看到是一个类似于fragment的控件的效果，Android的Views大家都知道是一个树状结构，那么其实有很多肉眼看不到的view是不用去绘制的。否则虽然看不到，但是依然会是影响性能的。我们经过尝试之后，去掉了其中的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.setBackgroundColor(getResources().getColor(</div><div class="line">            R.color.backColor));</div></pre></td></tr></table></figure>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gpu5.png" alt="gpu5"></p>
<p>在这里的setBackground其实本身是绘制背景的，但是由于View的重叠，用户并看不到这层绘制，但是的确重复绘制了。所以从效果上面我们可以看到从红色变成了淡红。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>大家不要上来就问测试怎么测试，安全怎么测试。性能和安全和你们执行测试用例，和UI的功能自动化是两回事儿。很多需要人为的介入分析和尝试。并不是说用一个工具去检测下有没有问题，有就有，没有就没有那么简单。希望大家明白这点。</p>
<p>by monkey</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近也是年底了，大家也是各忙各的，有的炫耀年终奖，有的炫耀维多利亚的秘密。反正各种炫耀。&lt;/p&gt;
&lt;h2 id=&quot;准备&quot;&gt;&lt;a href=&quot;#准备&quot; class=&quot;headerlink&quot; title=&quot;准备&quot;&gt;&lt;/a&gt;准备&lt;/h2&gt;&lt;p&gt;嗯，你没有进错。这里是性能板块。我们
    
    </summary>
    
    
      <category term="android性能测试" scheme="http://yoursite.com/tags/android%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>2014年 年终总结</title>
    <link href="http://yoursite.com/2016/11/07/2014summary/"/>
    <id>http://yoursite.com/2016/11/07/2014summary/</id>
    <published>2016-11-07T07:21:28.000Z</published>
    <updated>2016-11-07T07:24:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>其实我一直不知道这一年做了什么。我其实一直只记得这一年我在重复做几件事情。</p>
<ol>
<li>不停的告诉大家不要伸手，但是同时又停止不了回答很多小白问题</li>
<li>这一年我在公司可谓是坐过山车，一年中发生了5年可能发生的事情。不过结果还是好的</li>
<li>不停的在外面飞机＋火车，从而获得了type in 的称号。</li>
</ol>
<p>其实我首先先想说累，很多人和我说自己没有时间，你们真的体验过吗？我想说只有你们体验过了你们才会进步，因为那是一种斗争。这一年中我每天要在公司夹缝中求生存，我每天回家要学习，我根本没有双休日。有的时候一周里面我加班到凌晨，周五还没有结束就上飞机飞到外面，凌晨住进酒店，然后周一的凌晨再飞回来，然后继续上班。有的时候累已经不是困，已经不是身体上的，更是精神上的，只有自己知道要什么，才能够坚持，才能够去努力改变这一切，改变自己的生活。累要累的值得，而不是希望这一生都那么劳累。</p>
<p>其实很多人不了解我，但我明白大家的很多的感受。我不提倡伸手，我不想去和大家强调自己去主动学习的问题，原因是我是一个loser，我不敢说我多么成功，但是从2010年500元一个月的月薪，一个非常烂的专科毕业，连毕业证书都没有拿到的人这个点上面来讲，我觉得我能够混到现在已经算是奇迹了。依稀记得我在学校中我想过我以后会做什么，但是从未想到是现在这样。这四年的时间，我的确进步了，但是我没有忘记当初的心态和经历，我不希望只有我改变了，大家改变行业才能够改变。</p>
<p>其实时不时的也有很多关心我的人，和我说要陪陪我女儿。我也知道现在正是孩子最需要陪，就如恒温说的，我也同样很感谢我丈母娘和我妈能够帮我去带领宝宝，也感谢我老婆能够去关心宝宝。而我实在没有办法，在社会，需要生存。我现在的付出是为了将来更好的生活，也是没有办法的办法。</p>
<p>最后按照惯例，我回顾下我在2014年的一些事迹时间，说自己没有时间的看过来。那啥。。我澄清下。。我是88年的。。不要都觉得我很大了。。。。好不好。。。</p>
<p>2014年2月23号举办了移动测试会沙龙，并且是第一次使用了公司场地<br>2014年4月12号在上海出席了拔丝活动，并担任讲师<br>2014年4月19号在北京举办了移动测试会沙龙<br>2014年5月18号出席了上海某测试沙龙讲师<br>2014年5月24号出席了南京测试圈测试沙龙活动，并担任讲师<br>2014年6月14号在北京工信部研究所帮他们做移动互联网测试企业内训<br>2014年6月20号出席北京亚太地区分会，并担任讲师<br>2014年7月1号大话移动app测试正式出版<br>2014年7月12号参加google开发者大会，并宣传我的新书<br>2014年7月13号去上海同济校区给学生做技术演讲<br>2014年7月26号出席上海亚太地区分会，并担任讲师<br>2014年8月1号连续3周前往苏州给园区公司做技术内训<br>2014年9月13号参加CSTQB大会，并担任讲师<br>2014年9月20号前往深圳，参加深圳的分会，并担任讲师<br>2014年11月2号举办移动测试会，在ucloud举办。<br>2014年11月时不时前往杭州，当天来回<br>2014年11月14号飞珠海进行企业内训<br>2014年11月23号前往帝都参加top100<br>2014年12月5号前往南京出席沙龙，并担任一天的讲师<br>2014年12月6号前往武汉，在华中科技大学举办创业和职业规划讲座</p>
<p>精彩一直会继续，每个人都有每个人的精彩，也希望大家能活的精彩。祝愿大家2015年一切都好</p>
<p>by monkey</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;其实我一直不知道这一年做了什么。我其实一直只记得这一年我在重复做几件事情。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;不停的告诉大家不要伸手，但是同时又停止不了回答很多小白问题&lt;/li&gt;
&lt;li&gt;这一年我在公司可谓是坐过山车，一年中发生了5年可能发生的事情。不过结果还是好的&lt;/li&gt;
&lt;l
    
    </summary>
    
    
      <category term="other" scheme="http://yoursite.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>Gradle 编译交互小技巧</title>
    <link href="http://yoursite.com/2016/11/07/gradlenew/"/>
    <id>http://yoursite.com/2016/11/07/gradlenew/</id>
    <published>2016-11-07T03:40:55.000Z</published>
    <updated>2016-11-07T03:44:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天偶然在网上看到这样的小技巧，不过其实按照中Groovy的介绍，这个也是理所当然的，不过这个例子能够打开脑洞，其实啥都可以做。</p>
<p>首先工程已经在个人开源中：<a href="https://github.com/monkeytest15/Gradle_multi_apks/tree/master/monkeyApplication" target="_blank" rel="external">https://github.com/monkeytest15/Gradle_multi_apks/tree/master/monkeyApplication</a></p>
<p>如果看到之前的Gradle文章的话其实可以了解到groovy是个什么语言，其次之前其实也都看到gradle的编译是运行之后可以直接产出应用的，这次我们来看下交互的模式。</p>
<p>这个例子是为了在使用gradle编译的时候能够进行签名的定制化，我们需要在app的目录下，注意不是root project。在app的目录下的build.gradle做如下编写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">21</span></div><div class="line">    buildToolsVersion <span class="string">"20.0.0"</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.example.monkey.myapplication"</span></div><div class="line">        minSdkVersion <span class="number">10</span></div><div class="line">        targetSdkVersion <span class="number">21</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    &#125;</div><div class="line">    buildTypes &#123;</div><div class="line">        release &#123;</div><div class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></div><div class="line">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//这个是解决lint报错的代码</span></div><div class="line">    lintOptions &#123;</div><div class="line">        abortOnError <span class="keyword">false</span></div><div class="line">    &#125;</div><div class="line">    signingConfigs &#123;</div><div class="line">        myConfigs &#123;</div><div class="line">            <span class="function">storeFile     <span class="title">file</span><span class="params">( System.console()</span>.<span class="title">readLine</span><span class="params">(<span class="string">"\n\$ Enter keystore path: "</span>)</span>)</span></div><div class="line">            storePassword       System.<span class="title">console</span><span class="params">()</span>.<span class="title">readPassword</span><span class="params">(<span class="string">"\n\$ Enter keystore password: "</span>)</span></div><div class="line">            keyAlias            System.<span class="title">console</span><span class="params">()</span>.<span class="title">readLine</span><span class="params">(<span class="string">"\n\$ Enter key alias: "</span>)</span></div><div class="line">            keyPassword         System.<span class="title">console</span><span class="params">()</span>.<span class="title">readPassword</span><span class="params">(<span class="string">"\n\$ Enter key password: "</span>)</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    productFlavors &#123;</div><div class="line">        qqqq &#123;</div><div class="line">            applicationId = <span class="string">'com.monkey.qqq'</span></div><div class="line">        &#125;</div><div class="line">        hhhhh &#123;</div><div class="line">            applicationId=<span class="string">'com.monkey.hhh'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">dependencies &#123;</div><div class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></div><div class="line">    compile 'com.android.support:appcompat-v7:21.0.3'</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在这中间，关键代码如下：</p>
<p><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gradle1.png" alt="gradle1"></p>
<p>我们可以在编译的时候看到出现了签名的选择：<br><img src="https://cdn.rawgit.com/monkeytest15/BlogPNG/master/gradle2.png" alt="gradle2"></p>
<p>到此我们脑洞可以大开啦～～</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天偶然在网上看到这样的小技巧，不过其实按照中Groovy的介绍，这个也是理所当然的，不过这个例子能够打开脑洞，其实啥都可以做。&lt;/p&gt;
&lt;p&gt;首先工程已经在个人开源中：&lt;a href=&quot;https://github.com/monkeytest15/Gradle_mult
    
    </summary>
    
    
      <category term="gradle" scheme="http://yoursite.com/tags/gradle/"/>
    
  </entry>
  
</feed>
